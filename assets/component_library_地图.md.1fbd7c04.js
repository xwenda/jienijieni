import{_ as w,p as N,o as k,c as j,h as C,a8 as J,A as z,B as h,G as g,z as m,a as s,E as o,b as f,a9 as y,L as B}from"./chunks/framework.771e6ea6.js";const R={id:"cesium-box",class:"cesium-box"},Y={__name:"index",setup(b){let i="";return N(()=>{i=setInterval(()=>{window.Cesium&&(clearInterval(i),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",new Cesium.Viewer("cesium-box"))},1e3)}),(p,_)=>(k(),j("div",R))}},E=w(Y,[["__scopeId","data-v-f5c0dd51"]]),P={style:{"margin-bottom":"10px"}},A={__name:"flyToTarget",props:{$viewer:{type:Object,required:!0}},setup(b){let i=C(""),p=C(""),_=C(""),x=J({total:0,list:[]});function O(a,e,n=!1){const c=Object.prototype.toString.call(e);let{longitude:l,latitude:r,altitude:d,heading:t,pitch:u,roll:T}=store.getters.cesium;if(e){if(c!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");l=Number(e.longitude),r=Number(e.latitude),d=Number(e.altitude)}if(e&&!n){const M=V(a),v=Cesium.Cartesian3.fromDegrees(l,r);t=M.heading,u=M.pitch;let D=d||3e3;a.camera.lookAt(v,new Cesium.HeadingPitchRange(t,u,D)),a.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(l,r,d),orientation:{heading:Cesium.Math.toRadians(store.getters.cesium.heading),pitch:Cesium.Math.toRadians(store.getters.cesium.pitch),roll:store.getters.cesium.roll}})}function V(a){const e=a.camera,n=OneMap.Cartographic.fromCartesian(e.position),c=OneMap.Math.toDegrees(n.longitude),l=OneMap.Math.toDegrees(n.latitude),r=n.height;let d=OneMap.Cartographic.fromDegrees(c,l,r),u=a.scene.globe.ellipsoid.cartographicToCartesian(d);return{longitude:c,latitude:l,height:r,x:u.x,y:u.y,z:u.z,heading:e.heading,pitch:e.pitch,roll:e.roll}}function I(){fetch(`http://api.geonames.org/searchJSON?name=${_.value}&username=xwenda`).then(function(a){return a.json()}).then(function(a){x.total=a.totalResultsCount,x.list=a.geonames}).catch(function(a){})}return(a,e)=>{const n=g("el-input"),c=g("el-button"),l=g("el-table-column"),r=g("el-table"),d=g("el-card");return k(),z(d,{class:"box-card"},{default:h(()=>[m("div",P,[s(" 经度："),o(n,{modelValue:f(i),"onUpdate:modelValue":e[0]||(e[0]=t=>y(i)?i.value=t:i=t),style:{width:"200px"}},null,8,["modelValue"]),s(" 纬度："),o(n,{modelValue:f(p),"onUpdate:modelValue":e[1]||(e[1]=t=>y(p)?p.value=t:p=t),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),o(c,{type:"primary",onClick:e[2]||(e[2]=t=>O(b.$viewer,{}))},{default:h(()=>[s("飞行")]),_:1})]),s(" 搜索地名："),o(n,{modelValue:f(_),"onUpdate:modelValue":e[3]||(e[3]=t=>y(_)?_.value=t:_=t),onBlur:I,style:{width:"200px"}},null,8,["modelValue"]),o(r,{data:f(x).list,"max-height":"500"},{default:h(()=>[o(l,{fixed:"",prop:"name",label:"名字"}),o(l,{prop:"lng",label:"经度"}),o(l,{prop:"lat",label:"维度"}),o(l,{label:"操作",width:"120"},{default:h(t=>[o(c,{link:"",type:"primary",size:"small",onClick:B(u=>O(t.$index),["prevent"])},{default:h(()=>[s(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}},L=m("h1",{id:"地图",tabindex:"-1"},[s("地图 "),m("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),U=m("h2",{id:"cesium地图",tabindex:"-1"},[s("Cesium地图 "),m("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),q=m("h2",{id:"飞行方法",tabindex:"-1"},[s("飞行方法 "),m("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),W=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md"}'),G={name:"component_library/地图.md"},Z=Object.assign(G,{setup(b){return(i,p)=>(k(),j("div",null,[L,U,o(E),q,o(A)]))}});export{W as __pageData,Z as default};
