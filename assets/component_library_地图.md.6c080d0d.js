import{_ as T,p as z,y as J,o as C,c as O,h as b,A as Y,B as g,G as f,z as c,a as s,E as n,b as h,a8 as y}from"./chunks/framework.647aedcc.js";const B={id:"cesiumContainer",class:"cesium-box"},E={__name:"index",setup(x){let i="";return z(()=>{i=setInterval(()=>{window.Cesium&&(clearInterval(i),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",window.$viewer=new Cesium.Viewer("cesiumContainer"))},1e3),J(()=>{window.$viewer=null})}),(d,p)=>(C(),O("div",B))}},R=T(E,[["__scopeId","data-v-0afed965"]]);const P={style:{"margin-bottom":"10px"}},U={style:{"margin-bottom":"10px"}},A={__name:"flyToTarget",props:{$viewer:{type:Object,required:!0}},setup(x){let i=b(""),d=b(""),p=b(""),k=b([]);function M(t,e,o=!1){const u=Object.prototype.toString.call(e);let{longitude:l,latitude:r,altitude:_,heading:a,pitch:m,roll:V}={longitude:120.5,latitude:28.8856,altitude:2080359375e-2,heading:360,pitch:-89.99,roll:0};if(e){if(u!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");l=Number(e.longitude),r=Number(e.latitude),_=Number(e.altitude||3e3)}if(e&&!o){const v=j(t),D=Cesium.Cartesian3.fromDegrees(l,r);a=v.heading,m=v.pitch;let N=_||3e3;t.camera.lookAt(D,new Cesium.HeadingPitchRange(a,m,N)),t.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else t.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(l,r,_),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-89.99),roll:0}})}function j(t){const e=t.camera,o=OneMap.Cartographic.fromCartesian(e.position),u=OneMap.Math.toDegrees(o.longitude),l=OneMap.Math.toDegrees(o.latitude),r=o.height;let _=OneMap.Cartographic.fromDegrees(u,l,r),m=t.scene.globe.ellipsoid.cartographicToCartesian(_);return{longitude:u,latitude:l,height:r,x:m.x,y:m.y,z:m.z,heading:e.heading,pitch:e.pitch,roll:e.roll}}function I(){fetch(`https://api.tianditu.gov.cn/geocoder?ds={"keyWord":"${p.value}"}&tk=cd084de7e251a6d429ceb5cae01c4cd4`).then(function(t){return t.json()}).then(function(t){k.value=[{...t.location,longitude:t.location.lon,latitude:t.location.lat}]}).catch(function(t){})}function w(t){const{longitude:e,latitude:o}=t;e&&o&&M(window.$viewer,{longitude:e,latitude:o},!0)}return(t,e)=>{const o=f("el-input"),u=f("el-button"),l=f("el-table-column"),r=f("el-table"),_=f("el-card");return C(),Y(_,{class:"box-card"},{default:g(()=>[c("div",P,[s(" 经度："),n(o,{modelValue:h(i),"onUpdate:modelValue":e[0]||(e[0]=a=>y(i)?i.value=a:i=a),style:{width:"200px"}},null,8,["modelValue"])]),c("div",U,[s(" 纬度："),n(o,{modelValue:h(d),"onUpdate:modelValue":e[1]||(e[1]=a=>y(d)?d.value=a:d=a),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),n(u,{type:"primary",onClick:e[2]||(e[2]=a=>w({longitude:h(i),latitude:h(d)}))},{default:g(()=>[s("飞行")]),_:1})]),s(" 搜索地名："),n(o,{modelValue:h(p),"onUpdate:modelValue":e[3]||(e[3]=a=>y(p)?p.value=a:p=a),onChange:I,style:{width:"200px"}},null,8,["modelValue"]),n(r,{data:h(k),height:"250",style:{width:"100%","margin-top":"10px"}},{default:g(()=>[n(l,{prop:"keyWord",label:"地名"}),n(l,{prop:"longitude",label:"经度"}),n(l,{prop:"latitude",label:"维度"}),n(l,{label:"操作",width:"60"},{default:g(a=>[n(u,{link:"",type:"primary",size:"small",onClick:m=>w(a.row)},{default:g(()=>[s(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}},W=T(A,[["__scopeId","data-v-abdd2c14"]]),$=c("h1",{id:"地图",tabindex:"-1"},[s("地图 "),c("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),q=c("h2",{id:"cesium地图",tabindex:"-1"},[s("Cesium地图 "),c("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),G=c("h2",{id:"飞行方法",tabindex:"-1"},[s("飞行方法 "),c("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),S=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md"}'),L={name:"component_library/地图.md"},Z=Object.assign(L,{setup(x){return(i,d)=>(C(),O("div",null,[$,q,n(R),G,n(W)]))}});export{S as __pageData,Z as default};
