import{al as se,o as ye,E as be,j as H,k as ce,r as E,ad as B,K as ue,L as P,l as u,a3 as d,O as m,u as v,t as K,Q as k}from"./chunks/framework.BKKfdz-C.js";/**
 * @preserve
 * gcoord 1.0.6, geographic coordinate library
 * Copyright (c) 2024 Jiulong Hu <me@hujiulong.com>
 */const{sin:_,cos:Ge,sqrt:Q,abs:N,PI:f}=Math,R=6378245,ee=.006693421622965823;function de(e,t){return e>=72.004&&e<=137.8347&&t>=.8293&&t<=55.8271}function Me(e,t){let o=-100+2*e+3*t+.2*t*t+.1*e*t+.2*Q(N(e));return o+=(20*_(6*e*f)+20*_(2*e*f))*2/3,o+=(20*_(t*f)+40*_(t/3*f))*2/3,o+=(160*_(t/12*f)+320*_(t*f/30))*2/3,o}function Pe(e,t){let o=300+e+2*t+.1*e*e+.1*e*t+.1*Q(N(e));return o+=(20*_(6*e*f)+20*_(2*e*f))*2/3,o+=(20*_(e*f)+40*_(e/3*f))*2/3,o+=(150*_(e/12*f)+300*_(e/30*f))*2/3,o}function De(e,t){let o=Pe(e-105,t-35),n=Me(e-105,t-35);const i=t/180*f;let a=_(i);a=1-ee*a*a;const l=Q(a);return o=o*180/(R/l*Ge(i)*f),n=n*180/(R*(1-ee)/(a*l)*f),[o,n]}function D(e){const[t,o]=e;if(!de(t,o))return[t,o];const n=De(t,o);return[t+n[0],o+n[1]]}function L(e){const[t,o]=e;if(!de(t,o))return[t,o];let[n,i]=[t,o],a=D([n,i]),l=a[0]-t,r=a[1]-o;for(;N(l)>1e-6||N(r)>1e-6;)n-=l,i-=r,a=D([n,i]),l=a[0]-t,r=a[1]-o;return[n,i]}const{sin:O,cos:A,atan2:me,sqrt:fe,PI:Se}=Math,V=Se*3e3/180;function $(e){const[t,o]=e,n=t-.0065,i=o-.006,a=fe(n*n+i*i)-2e-5*O(i*V),l=me(i,n)-3e-6*A(n*V),r=a*A(l),s=a*O(l);return[r,s]}function W(e){const[t,o]=e,n=t,i=o,a=fe(n*n+i*i)+2e-5*O(i*V),l=me(i,n)+3e-6*A(n*V),r=a*A(l)+.0065,s=a*O(l)+.006;return[r,s]}const te=180/Math.PI,oe=Math.PI/180,z=6378137,G=20037508342789244e-9;function T(e){return[e[0]*te/z,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/z)))*te]}function q(e){const t=Math.abs(e[0])<=180?e[0]:e[0]-(e[0]<0?-1:1)*360,o=[z*t*oe,z*Math.log(Math.tan(Math.PI*.25+.5*e[1]*oe))];return o[0]>G&&(o[0]=G),o[0]<-G&&(o[0]=-G),o[1]>G&&(o[1]=G),o[1]<-G&&(o[1]=-G),o}const{abs:X}=Math,ne=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],ie=[75,60,45,30,15,0],Ie=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],xe=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function pe(e,t,o){const n=X(t)/o[9];let i=o[0]+o[1]*X(e),a=o[2]+o[3]*n+o[4]*Math.pow(n,2)+o[5]*Math.pow(n,3)+o[6]*Math.pow(n,4)+o[7]*Math.pow(n,5)+o[8]*Math.pow(n,6);return i*=e<0?-1:1,a*=t<0?-1:1,[i,a]}function U(e){const[t,o]=e;let n=[];for(let i=0;i<ie.length;i++)if(X(o)>ie[i]){n=xe[i];break}return pe(t,o,n)}function j(e){const[t,o]=e;let n=[];for(let i=0;i<ne.length;i++)if(o>=ne[i]){n=Ie[i];break}return pe(t,o,n)}function M(e,t){if(!e)throw new Error(t)}function ge(e){return!!e&&Object.prototype.toString.call(e)==="[object Array]"}function ae(e){return!isNaN(Number(e))&&e!==null&&!ge(e)}function w(...e){const t=e.length-1;return function(...o){let n=t,i=e[t].apply(null,o);for(;n--;)i=e[n].call(null,i);return i}}function he(e,t,o=!1){if(e===null)return;let n,i,a,l,r,s,p=0,g=0,C,S;const{type:J}=e,h=J==="FeatureCollection",Z=J==="Feature",we=h?e.features.length:1;for(let I=0;I<we;I++){C=h?e.features[I].geometry:Z?e.geometry:e,S=C?C.type==="GeometryCollection":!1,s=S?C.geometries.length:1;for(let Y=0;Y<s;Y++){let y=0,x=0;if(l=S?C.geometries[Y]:C,l===null)continue;const b=l.type;switch(p=o&&(b==="Polygon"||b==="MultiPolygon")?1:0,b){case null:break;case"Point":if(r=l.coordinates,t(r,g,I,y,x)===!1)return!1;g++,y++;break;case"LineString":case"MultiPoint":for(r=l.coordinates,n=0;n<r.length;n++){if(t(r[n],g,I,y,x)===!1)return!1;g++,b==="MultiPoint"&&y++}b==="LineString"&&y++;break;case"Polygon":case"MultiLineString":for(r=l.coordinates,n=0;n<r.length;n++){for(i=0;i<r[n].length-p;i++){if(t(r[n][i],g,I,y,x)===!1)return!1;g++}b==="MultiLineString"&&y++,b==="Polygon"&&x++}b==="Polygon"&&y++;break;case"MultiPolygon":for(r=l.coordinates,n=0;n<r.length;n++){for(x=0,i=0;i<r[n].length;i++){for(a=0;a<r[n][i].length-p;a++){if(t(r[n][i][a],g,I,y,x)===!1)return!1;g++}x++}y++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(he(l.geometries[n],t,o)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}var c;(function(e){e.WGS84="WGS84",e.WGS1984="WGS84",e.EPSG4326="WGS84",e.GCJ02="GCJ02",e.AMap="GCJ02",e.BD09="BD09",e.BD09LL="BD09",e.Baidu="BD09",e.BMap="BD09",e.BD09MC="BD09MC",e.BD09Meter="BD09MC",e.EPSG3857="EPSG3857",e.EPSG900913="EPSG3857",e.EPSG102100="EPSG3857",e.WebMercator="EPSG3857",e.WM="EPSG3857"})(c||(c={}));const Be={to:{[c.GCJ02]:D,[c.BD09]:w(W,D),[c.BD09MC]:w(U,W,D),[c.EPSG3857]:q}},Ee={to:{[c.WGS84]:L,[c.BD09]:W,[c.BD09MC]:w(U,W),[c.EPSG3857]:w(q,L)}},ve={to:{[c.WGS84]:w(L,$),[c.GCJ02]:$,[c.EPSG3857]:w(q,L,$),[c.BD09MC]:U}},ke={to:{[c.WGS84]:T,[c.GCJ02]:w(D,T),[c.BD09]:w(W,D,T),[c.BD09MC]:w(U,W,D,T)}},Fe={to:{[c.WGS84]:w(L,$,j),[c.GCJ02]:w($,j),[c.EPSG3857]:w(q,L,$,j),[c.BD09]:j}},$e={WGS84:Be,GCJ02:Ee,BD09:ve,EPSG3857:ke,BD09MC:Fe};var Le=$e;function We(e,t,o){if(M(!!e,"The args[0] input coordinate is required"),M(!!t,"The args[1] original coordinate system is required"),M(!!o,"The args[2] target coordinate system is required"),t===o)return e;const n=Le[t];M(!!n,`Invalid original coordinate system: ${t}`);const i=n.to[o];M(!!i,`Invalid target coordinate system: ${o}`);const a=typeof e;if(M(a==="string"||a==="object",`Invalid input coordinate type: ${a}`),a==="string")try{e=JSON.parse(e)}catch{throw new Error(`Invalid input coordinate: ${e}`)}let l=!1;ge(e)&&(M(e.length>=2,`Invalid input coordinate: ${e}`),M(ae(e[0])&&ae(e[1]),`Invalid input coordinate: ${e}`),e=e.map(Number),l=!0);const r=i;return l?r(e):(he(e,s=>{[s[0],s[1]]=r(s)}),e)}const F=Object.assign(Object.assign({},c),{CRSTypes:c,transform:We}),Je=(e,t,o=!0)=>{t=t||window.$viewer,window.elementForCesiumCoordinate=document.createElement("div"),window.elementForCesiumCoordinate.style.cssText=`
      position: absolute;
      pointer-events: none;
      z-index: 100; 
      top:0;
      left: 0;
      background: white;
      padding: 5px;
      color: black;
      font-size: 12px;
    `,document.querySelector(".cesium-viewer").append(window.elementForCesiumCoordinate),o||(window.elementForCesiumCoordinate.style.display="block"),window.HeadlerForCesiumCoordinate||(window.HeadlerForCesiumCoordinate=new Cesium.ScreenSpaceEventHandler(t.canvas)),t._container.style.cursor="crosshair",window.HeadlerForCesiumCoordinate.setInputAction(n=>{const i=re(n,t),a=Object.prototype.toString.call(e),l=F.transform([i.x,i.y],F.WGS84,F.BD09),r=F.transform([i.x,i.y],F.WGS84,F.GCJ02),s={WGS84:{longitude:i.x,latitude:i.y,altitude:i.z},BD09:{longitude:l[0],latitude:l[1]},GCJ02:{longitude:r[0],latitude:r[1]}};return e&&["[object Function]","[object AsyncFunction]"].includes(a)&&e(s),s},Cesium.ScreenSpaceEventType.LEFT_CLICK),window.HeadlerForCesiumCoordinate.setInputAction(n=>{Ce(t)},Cesium.ScreenSpaceEventType.RIGHT_CLICK),window.HeadlerForCesiumCoordinate.setInputAction(n=>{if(!window.elementForCesiumCoordinate)return;window.elementForCesiumCoordinate.style.transform=`translate(${n.endPosition.x+5+"px"}, ${n.endPosition.y-30+"px"})`;const i=re({position:n.endPosition},t);window.elementForCesiumCoordinate.innerText=`当前位置为：经度：${i.x}, 纬度：${i.y}`},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},Ce=e=>{e=e||window.$viewer,e._container.style.cursor="default",window.elementForCesiumCoordinate&&(document.querySelector(".cesium-viewer").removeChild(window.elementForCesiumCoordinate),window.elementForCesiumCoordinate=null),window.HeadlerForCesiumCoordinate&&(window.HeadlerForCesiumCoordinate.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),window.HeadlerForCesiumCoordinate.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),window.HeadlerForCesiumCoordinate=null)},re=(e,t)=>{t=t||window.$viewer;const o=t.scene.camera.pickEllipsoid(e.position,t.scene.globe.ellipsoid),n=le(o),i=t.scene.pickPosition(e.position),a=le(i);return a.z>0?a:n},le=e=>{if(!e)return{x:0,y:0,z:0};const t=Cesium.Ellipsoid.WGS84.cartesianToCartographic(e);return new Cesium.Cartesian3(Cesium.Math.toDegrees(t.longitude),Cesium.Math.toDegrees(t.latitude),t.height)},_e=(e,t,o=!1)=>{const n=Object.prototype.toString.call(t);let{longitude:i,latitude:a,altitude:l,heading:r,pitch:s,roll:p}={longitude:120.5,latitude:28.8856,altitude:2080359375e-2,heading:360,pitch:-89.99,roll:0};if(t){if(n!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");i=Number(t.longitude),a=Number(t.latitude),l=Number(t.altitude||3e3)}if(t&&!o){const g=Te(e),C=Cesium.Cartesian3.fromDegrees(i,a);r=g.heading,s=g.pitch;let S=l||3e3;e.camera.lookAt(C,new Cesium.HeadingPitchRange(r,s,S)),e.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,a,l),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-89.99),roll:0}})},Te=e=>{const t=e.camera,o=Cesium.Cartographic.fromCartesian(t.position),n=Cesium.Math.toDegrees(o.longitude),i=Cesium.Math.toDegrees(o.latitude),a=o.height;let l=Cesium.Cartographic.fromDegrees(n,i,a),s=e.scene.globe.ellipsoid.cartographicToCartesian(l);return{longitude:n,latitude:i,height:a,x:s.x,y:s.y,z:s.z,heading:t.heading,pitch:t.pitch,roll:t.roll}},je={id:"cesiumContainer",class:"cesium-box"},Ne={__name:"index",setup(e){let t="";return ye(()=>{t=setInterval(()=>{window.Cesium&&(clearInterval(t),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",window.$viewer=new Cesium.Viewer("cesiumContainer"),_e(window.$viewer,{longitude:114.44798458764086,latitude:22.782112133077288},!0))},1e3),be(()=>{window.$viewer=null})}),(o,n)=>(H(),ce("div",je))}},Oe=se(Ne,[["__scopeId","data-v-9e05b56c"]]),Ae={style:{"margin-bottom":"10px"}},Ve={style:{"margin-bottom":"10px"}},ze={__name:"flyToTarget",setup(e){let t=E(""),o=E(""),n=E(""),i=E([]);function a(){fetch(`https://api.tianditu.gov.cn/geocoder?ds={"keyWord":"${n.value}"}&tk=cd084de7e251a6d429ceb5cae01c4cd4`).then(function(r){return r.json()}).then(function(r){i.value=[{...r.location,longitude:r.location.lon,latitude:r.location.lat}]}).catch(function(r){})}function l(r){const{longitude:s,latitude:p}=r;s&&p&&_e(window.$viewer,{longitude:s,latitude:p},!0)}return(r,s)=>{const p=B("el-input"),g=B("el-button"),C=B("el-table-column"),S=B("el-table"),J=B("el-card");return H(),ue(J,{class:"box-card"},{default:P(()=>[u("div",Ae,[d(" 经度："),m(p,{modelValue:v(t),"onUpdate:modelValue":s[0]||(s[0]=h=>K(t)?t.value=h:t=h),style:{width:"200px"}},null,8,["modelValue"])]),u("div",Ve,[d(" 纬度："),m(p,{modelValue:v(o),"onUpdate:modelValue":s[1]||(s[1]=h=>K(o)?o.value=h:o=h),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),m(g,{type:"primary",onClick:s[2]||(s[2]=h=>l({longitude:v(t),latitude:v(o)}))},{default:P(()=>[d("飞行")]),_:1})]),d(" 搜索地名："),m(p,{modelValue:v(n),"onUpdate:modelValue":s[3]||(s[3]=h=>K(n)?n.value=h:n=h),onChange:a,style:{width:"200px"}},null,8,["modelValue"]),m(S,{data:v(i),height:"250",style:{width:"100%","margin-top":"10px"}},{default:P(()=>[m(C,{prop:"keyWord",label:"地名"}),m(C,{prop:"longitude",label:"经度"}),m(C,{prop:"latitude",label:"维度"}),m(C,{label:"操作",width:"60"},{default:P(h=>[m(g,{link:"",type:"primary",size:"small",onClick:Z=>l(h.row)},{default:P(()=>[d(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}},He=se(ze,[["__scopeId","data-v-2381f44a"]]),qe={style:{margin:"0 0 10px 5px",display:"flex","align-items":"center"}},Ue={style:{"margin-left":"10px"}},Ye={style:{color:"#409eff"}},Ke={style:{color:"#e6a23c"}},Xe={style:{color:"#67c23a"}},Qe={__name:"getPoint",setup(e){const t=E({longitude:null,latitude:null}),o=E({longitude:null,latitude:null}),n=E({longitude:null,latitude:null,altitude:null});function i(){Je(l=>{n.value=l.WGS84,o.value=l.GCJ02,t.value=l.BD09})}function a(){Ce()}return(l,r)=>{const s=B("el-button"),p=B("el-card");return H(),ue(p,{class:"box-card"},{default:P(()=>[u("div",qe,[m(s,{type:"primary",onClick:i},{default:P(()=>[d("获取坐标")]),_:1}),m(s,{type:"primary",onClick:a},{default:P(()=>[d("取消获取")]),_:1}),u("div",Ue,[u("div",Ye,[d(" 84坐标： "),u("span",null,k(n.value.longitude),1),d("  "),u("span",null,k(n.value.latitude),1)]),u("div",Ke,[d(" 百度坐标： "),u("span",null,k(t.value.longitude),1),d("  "),u("span",null,k(t.value.latitude),1)]),u("div",Xe,[d(" 火星坐标： "),u("span",null,k(o.value.longitude),1),d("  "),u("span",null,k(o.value.latitude),1)])])])]),_:1})}}},Ze=u("h1",{id:"地图",tabindex:"-1"},[d("地图 "),u("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),Re=u("h2",{id:"cesium地图",tabindex:"-1"},[d("Cesium地图 "),u("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),et=u("h2",{id:"获取坐标",tabindex:"-1"},[d("获取坐标 "),u("a",{class:"header-anchor",href:"#获取坐标","aria-label":'Permalink to "获取坐标"'},"​")],-1),tt=u("h2",{id:"飞行方法",tabindex:"-1"},[d("飞行方法 "),u("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),it=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md","filePath":"component_library/地图.md"}'),ot={name:"component_library/地图.md"},at=Object.assign(ot,{setup(e){return(t,o)=>(H(),ce("div",null,[Ze,Re,m(Oe),et,m(Qe),tt,m(He)]))}});export{it as __pageData,at as default};
