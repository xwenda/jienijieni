import{M as Se}from"./chunks/index.Cpk6PsSN.js";import{al as re,o as Oe,E as _e,w as Ae,j as z,k as he,r as M,ad as P,K as ie,L as A,l as g,a3 as p,O as w,u as B,t as ee,Q as F}from"./chunks/framework.BKKfdz-C.js";/**
 * @preserve
 * gcoord 1.0.6, geographic coordinate library
 * Copyright (c) 2024 Jiulong Hu <me@hujiulong.com>
 */const{sin:S,cos:Be,sqrt:se,abs:q,PI:v}=Math,le=6378245,ue=.006693421622965823;function pe(r,e){return r>=72.004&&r<=137.8347&&e>=.8293&&e<=55.8271}function Me(r,e){let t=-100+2*r+3*e+.2*e*e+.1*r*e+.2*se(q(r));return t+=(20*S(6*r*v)+20*S(2*r*v))*2/3,t+=(20*S(e*v)+40*S(e/3*v))*2/3,t+=(160*S(e/12*v)+320*S(e*v/30))*2/3,t}function Pe(r,e){let t=300+r+2*e+.1*r*r+.1*r*e+.1*se(q(r));return t+=(20*S(6*r*v)+20*S(2*r*v))*2/3,t+=(20*S(r*v)+40*S(r/3*v))*2/3,t+=(150*S(r/12*v)+300*S(r/30*v))*2/3,t}function xe(r,e){let t=Pe(r-105,e-35),o=Me(r-105,e-35);const n=e/180*v;let i=S(n);i=1-ue*i*i;const s=se(i);return t=t*180/(le/s*Be(n)*v),o=o*180/(le*(1-ue)/(i*s)*v),[t,o]}function L(r){const[e,t]=r;if(!pe(e,t))return[e,t];const o=xe(e,t);return[e+o[0],t+o[1]]}function N(r){const[e,t]=r;if(!pe(e,t))return[e,t];let[o,n]=[e,t],i=L([o,n]),s=i[0]-e,l=i[1]-t;for(;q(s)>1e-6||q(l)>1e-6;)o-=s,n-=l,i=L([o,n]),s=i[0]-e,l=i[1]-t;return[o,n]}const{sin:R,cos:Y,atan2:ye,sqrt:we,PI:ke}=Math,U=ke*3e3/180;function $(r){const[e,t]=r,o=e-.0065,n=t-.006,i=we(o*o+n*n)-2e-5*R(n*U),s=ye(n,o)-3e-6*Y(o*U),l=i*Y(s),u=i*R(s);return[l,u]}function V(r){const[e,t]=r,o=e,n=t,i=we(o*o+n*n)+2e-5*R(n*U),s=ye(n,o)+3e-6*Y(o*U),l=i*Y(s)+.0065,u=i*R(s)+.006;return[l,u]}const ce=180/Math.PI,ae=Math.PI/180,K=6378137,k=20037508342789244e-9;function H(r){return[r[0]*ce/K,(Math.PI*.5-2*Math.atan(Math.exp(-r[1]/K)))*ce]}function X(r){const e=Math.abs(r[0])<=180?r[0]:r[0]-(r[0]<0?-1:1)*360,t=[K*e*ae,K*Math.log(Math.tan(Math.PI*.25+.5*r[1]*ae))];return t[0]>k&&(t[0]=k),t[0]<-k&&(t[0]=-k),t[1]>k&&(t[1]=k),t[1]<-k&&(t[1]=-k),t}const{abs:te}=Math,de=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],me=[75,60,45,30,15,0],Ge=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Fe=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function be(r,e,t){const o=te(e)/t[9];let n=t[0]+t[1]*te(r),i=t[2]+t[3]*o+t[4]*Math.pow(o,2)+t[5]*Math.pow(o,3)+t[6]*Math.pow(o,4)+t[7]*Math.pow(o,5)+t[8]*Math.pow(o,6);return n*=r<0?-1:1,i*=e<0?-1:1,[n,i]}function Z(r){const[e,t]=r;let o=[];for(let n=0;n<me.length;n++)if(te(t)>me[n]){o=Fe[n];break}return be(e,t,o)}function J(r){const[e,t]=r;let o=[];for(let n=0;n<de.length;n++)if(t>=de[n]){o=Ge[n];break}return be(e,t,o)}function G(r,e){if(!r)throw new Error(e)}function ve(r){return!!r&&Object.prototype.toString.call(r)==="[object Array]"}function Ce(r){return!isNaN(Number(r))&&r!==null&&!ve(r)}function O(...r){const e=r.length-1;return function(...t){let o=e,n=r[e].apply(null,t);for(;o--;)n=r[o].call(null,n);return n}}function Ee(r,e,t=!1){if(r===null)return;let o,n,i,s,l,u,c=0,a=0,m,y;const{type:b}=r,E=b==="FeatureCollection",_=b==="Feature",h=E?r.features.length:1;for(let D=0;D<h;D++){m=E?r.features[D].geometry:_?r.geometry:r,y=m?m.type==="GeometryCollection":!1,u=y?m.geometries.length:1;for(let T=0;T<u;T++){let I=0,W=0;if(s=y?m.geometries[T]:m,s===null)continue;const x=s.type;switch(c=t&&(x==="Polygon"||x==="MultiPolygon")?1:0,x){case null:break;case"Point":if(l=s.coordinates,e(l,a,D,I,W)===!1)return!1;a++,I++;break;case"LineString":case"MultiPoint":for(l=s.coordinates,o=0;o<l.length;o++){if(e(l[o],a,D,I,W)===!1)return!1;a++,x==="MultiPoint"&&I++}x==="LineString"&&I++;break;case"Polygon":case"MultiLineString":for(l=s.coordinates,o=0;o<l.length;o++){for(n=0;n<l[o].length-c;n++){if(e(l[o][n],a,D,I,W)===!1)return!1;a++}x==="MultiLineString"&&I++,x==="Polygon"&&W++}x==="Polygon"&&I++;break;case"MultiPolygon":for(l=s.coordinates,o=0;o<l.length;o++){for(W=0,n=0;n<l[o].length;n++){for(i=0;i<l[o][n].length-c;i++){if(e(l[o][n][i],a,D,I,W)===!1)return!1;a++}W++}I++}break;case"GeometryCollection":for(o=0;o<s.geometries.length;o++)if(Ee(s.geometries[o],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}var C;(function(r){r.WGS84="WGS84",r.WGS1984="WGS84",r.EPSG4326="WGS84",r.GCJ02="GCJ02",r.AMap="GCJ02",r.BD09="BD09",r.BD09LL="BD09",r.Baidu="BD09",r.BMap="BD09",r.BD09MC="BD09MC",r.BD09Meter="BD09MC",r.EPSG3857="EPSG3857",r.EPSG900913="EPSG3857",r.EPSG102100="EPSG3857",r.WebMercator="EPSG3857",r.WM="EPSG3857"})(C||(C={}));const Le={to:{[C.GCJ02]:L,[C.BD09]:O(V,L),[C.BD09MC]:O(Z,V,L),[C.EPSG3857]:X}},Te={to:{[C.WGS84]:N,[C.BD09]:V,[C.BD09MC]:O(Z,V),[C.EPSG3857]:O(X,N)}},We={to:{[C.WGS84]:O(N,$),[C.GCJ02]:$,[C.EPSG3857]:O(X,N,$),[C.BD09MC]:Z}},$e={to:{[C.WGS84]:H,[C.GCJ02]:O(L,H),[C.BD09]:O(V,L,H),[C.BD09MC]:O(Z,V,L,H)}},Ne={to:{[C.WGS84]:O(N,$,J),[C.GCJ02]:O($,J),[C.EPSG3857]:O(X,N,$,J),[C.BD09]:J}},Ve={WGS84:Le,GCJ02:Te,BD09:We,EPSG3857:$e,BD09MC:Ne};var ze=Ve;function He(r,e,t){if(G(!!r,"The args[0] input coordinate is required"),G(!!e,"The args[1] original coordinate system is required"),G(!!t,"The args[2] target coordinate system is required"),e===t)return r;const o=ze[e];G(!!o,`Invalid original coordinate system: ${e}`);const n=o.to[t];G(!!n,`Invalid target coordinate system: ${t}`);const i=typeof r;if(G(i==="string"||i==="object",`Invalid input coordinate type: ${i}`),i==="string")try{r=JSON.parse(r)}catch{throw new Error(`Invalid input coordinate: ${r}`)}let s=!1;ve(r)&&(G(r.length>=2,`Invalid input coordinate: ${r}`),G(Ce(r[0])&&Ce(r[1]),`Invalid input coordinate: ${r}`),r=r.map(Number),s=!0);const l=n;return s?l(r):(Ee(r,u=>{[u[0],u[1]]=l(u)}),r)}const f=Object.assign(Object.assign({},C),{CRSTypes:C,transform:He}),ne=(r,e,t=!0)=>{e=e||window.$viewer,window.elementForCesiumCoordinate=document.createElement("div"),window.elementForCesiumCoordinate.style.cssText=`
      position: absolute;
      pointer-events: none;
      z-index: 100; 
      top:0;
      left: 0;
      background: white;
      padding: 5px;
      color: black;
      font-size: 12px;
    `,document.querySelector(".cesium-viewer").append(window.elementForCesiumCoordinate),t||(window.elementForCesiumCoordinate.style.display="block"),window.HeadlerForCesiumCoordinate||(window.HeadlerForCesiumCoordinate=new Cesium.ScreenSpaceEventHandler(e.canvas)),e._container.style.cursor="crosshair",window.HeadlerForCesiumCoordinate.setInputAction(o=>{const n=ge(o,e),i=Object.prototype.toString.call(r),s=f.transform([n.x,n.y],f.WGS84,f.BD09),l=f.transform([n.x,n.y],f.WGS84,f.GCJ02),u={WGS84:{longitude:n.x,latitude:n.y,altitude:n.z},BD09:{longitude:s[0],latitude:s[1]},GCJ02:{longitude:l[0],latitude:l[1]}};return r&&["[object Function]","[object AsyncFunction]"].includes(i)&&r(u),u},Cesium.ScreenSpaceEventType.LEFT_CLICK),window.HeadlerForCesiumCoordinate.setInputAction(o=>{De(e)},Cesium.ScreenSpaceEventType.RIGHT_CLICK),window.HeadlerForCesiumCoordinate.setInputAction(o=>{if(!window.elementForCesiumCoordinate)return;window.elementForCesiumCoordinate.style.transform=`translate(${o.endPosition.x+5+"px"}, ${o.endPosition.y-30+"px"})`;const n=ge({position:o.endPosition},e);window.elementForCesiumCoordinate.innerText=`当前位置为：经度：${n.x}, 纬度：${n.y}`},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},De=r=>{r=r||window.$viewer,r._container.style.cursor="default",window.elementForCesiumCoordinate&&(document.querySelector(".cesium-viewer").removeChild(window.elementForCesiumCoordinate),window.elementForCesiumCoordinate=null),window.HeadlerForCesiumCoordinate&&(window.HeadlerForCesiumCoordinate.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),window.HeadlerForCesiumCoordinate.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),window.HeadlerForCesiumCoordinate=null)},ge=(r,e)=>{e=e||window.$viewer;const t=e.scene.camera.pickEllipsoid(r.position,e.scene.globe.ellipsoid),o=fe(t),n=e.scene.pickPosition(r.position),i=fe(n);return i.z>0?i:o},fe=r=>{if(!r)return{x:0,y:0,z:0};const e=Cesium.Ellipsoid.WGS84.cartesianToCartographic(r);return new Cesium.Cartesian3(Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height)},Ie=(r,e,t=!1)=>{const o=Object.prototype.toString.call(e);let{longitude:n,latitude:i,altitude:s,heading:l,pitch:u,roll:c}={longitude:120.5,latitude:28.8856,altitude:2080359375e-2,heading:360,pitch:-89.99,roll:0};if(e){if(o!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");n=Number(e.longitude),i=Number(e.latitude),s=Number(e.altitude||3e3)}if(e&&!t){const a=Je(r),m=Cesium.Cartesian3.fromDegrees(n,i);l=a.heading,u=a.pitch;let y=s||3e3;r.camera.lookAt(m,new Cesium.HeadingPitchRange(l,u,y)),r.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else r.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(n,i,s),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-89.99),roll:0}})},Je=r=>{const e=r.camera,t=Cesium.Cartographic.fromCartesian(e.position),o=Cesium.Math.toDegrees(t.longitude),n=Cesium.Math.toDegrees(t.latitude),i=t.height;let s=Cesium.Cartographic.fromDegrees(o,n,i),u=r.scene.globe.ellipsoid.cartographicToCartesian(s);return{longitude:o,latitude:n,height:i,x:u.x,y:u.y,z:u.z,heading:e.heading,pitch:e.pitch,roll:e.roll}},je=[{label:"本因坊",longitude:"114.4479428170782",latitude:"22.782362599302754"},{label:"仁和卫城",longitude:"114.47419695241648",latitude:"22.763874414125794"},{label:"创新大厦",longitude:"114.50086394615684",latitude:"22.744472406189676"},{label:"翡翠山",longitude:"114.47932275971425",latitude:"22.76172533394647"},{label:"万达广场",longitude:"114.47529392770444",latitude:"22.757991509952884"},{label:"坭生墩",longitude:"114.33745767119868",latitude:"22.859287960097454"},{label:"伯恩",longitude:"114.38476181939144",latitude:"22.764681736075786"},{label:"恒诚公寓",longitude:"113.78342222916902",latitude:"22.692325073831128"},{label:"吉阳智能",longitude:"113.78163391707902",latitude:"22.690373688853043"},{label:"扯皮男",longitude:"113.38715011567169",latitude:"23.118192591947963"},{label:"保利鱼珠港",longitude:"113.41436618261955",latitude:"23.104199537728352"},{label:"全丰商业大厦",longitude:"113.35837104578289",latitude:"23.11950792271978"},{label:"都格",longitude:"114.47785503398983",latitude:"22.59045883748482"},{label:"智达楼",longitude:"114.23437265711601",latitude:"22.320806008777648"},{label:"大理",longitude:"100.22883946406748",latitude:"25.597748306934264"},{label:"玉龙雪山",longitude:"100.25574241411658",latitude:"27.102587850720642"},{label:"丽江古城",longitude:"100.22218972340721",latitude:"26.88153074448497"},{label:"海上艺术世界",longitude:"113.911384519265",latitude:"22.479487434123918"},{label:"双月湾",longitude:"114.87614386306755",latitude:"22.597186702656337"},{label:"沙面岛",longitude:"113.23876406160846",latitude:"23.109839009015722"},{label:"永庆坊",longitude:"113.2291649714323",latitude:"23.118978447782936"},{label:"动物园",longitude:"113.29910149414735",latitude:"23.14622916912378"},{label:"大梅沙",longitude:"114.3011186935201",latitude:"22.593001261167153"},{label:"国家地质公园",longitude:"114.52132835941023",latitude:"22.529583589386792"},{label:"连州",longitude:" 112.37039452998201",latitude:"24.782298726746316"},{label:"连州地下河",longitude:"112.31830970780058",latitude:"25.0069817335132"},{label:"万绿湖",longitude:"114.62687706243749",latitude:"23.778017227017337"},{label:"俪景鸿都",longitude:"114.23694004698629",latitude:"22.715994198440878"},{label:"金山湖",longitude:"114.43832171785321",latitude:"23.058608062685614"},{label:"联瑞职业学校",longitude:"114.41630417702635",latitude:"23.067651453526572"},{label:"广东金融学院",longitude:"113.37254716787793",latitude:"23.20279394228192"},{label:"广东金融学院肇庆校区",longitude:"112.47305308738612",latitude:"23.08821466184628"},{label:"七星岩",longitude:"112.47886139924505",latitude:"23.081679156643894"},{label:"鼎湖",longitude:"112.56274458253266",latitude:"23.161318077656432"},{label:"野趣沟",longitude:"114.61786252809527",latitude:"23.709034370253004"},{label:"东莞理工学院",longitude:"113.769300",latitude:"23.053240"},{label:"西涌",longitude:"114.53392085648728",latitude:"22.478745876300817"},{label:"8号仓",longitude:"114.050200",latitude:"22.621860"},{label:"壹方天地",longitude:"114.023200",latitude:"22.650610"},{label:"大鹏所城",longitude:"114.508734",latitude:"22.597038"},{label:"南武当旅游景区",longitude:"114.713409",latitude:"24.618112"},{label:"龙岗cocopark",longitude:"114.224720",latitude:"22.694360"},{label:"粉岭",longitude:"114.136257",latitude:"22.497322"},{label:"丹灶",longitude:"112.915972",latitude:"23.054724"},{label:"巽寮湾",longitude:"114.755560",latitude:"22.693147"},{label:"天文台",longitude:"114.557420",latitude:"22.480435"},{label:"大梧桐",longitude:"114.219947",latitude:"22.581676"},{label:"罗浮山",longitude:"113.981631",latitude:"23.221243"},{label:"东莞观音山",longitude:"114.116415",latitude:"22.898924"},{label:"马峦山",longitude:"114.333419",latitude:"22.652080"},{label:"正佳广场",longitude:"113.322090",latitude:"23.135320"}];class d{constructor(){}static getBDConstructor(){return window.BMapGL}static getBDInstance(){return window.$bdglmap}drawBDMap(e){const t={};return t.polygon=this._renderBDPolygon(e),t.icon=this._renderBDIcon(e),t.label=this._renderBDLabel(e),{target:t,remove:()=>{var o,n,i;(o=t.polygon)==null||o.remove(),(n=t.icon)==null||n.remove(),(i=t.label)==null||i.remove()}}}renderBDBoundary(e,t){const o=e.map(i=>new(d.getBDConstructor()).Point(...f.transform([i[0],i[1]],f.WGS84,f.BD09))),n=new(d.getBDConstructor()).Polygon(o,{strokeColor:t,strokeWeight:2,strokeOpacity:1,fillColor:t,fillOpacity:0});return d.getBDInstance().addOverlay(n),{target:n,remove:()=>{d.getBDInstance()&&d.getBDInstance().removeOverlay(n)}}}_renderBDPolygon(e){if(e.hidPolygon||!e.polygon)return;const t=e.polygon.map(n=>new(d.getBDConstructor()).Point(...f.transform([n[0],n[1]],f.WGS84,f.BD09))),o=new(d.getBDConstructor()).Polygon(t,{strokeColor:e.borderColor,strokeWeight:1,strokeOpacity:1,fillColor:e.backgroundColor,fillOpacity:.2});return d.getBDInstance().addOverlay(o),{target:o,remove:()=>{d.getBDInstance()&&d.getBDInstance().removeOverlay(o)}}}_renderBDIcon(e){var i,s,l;if(e.hidIcon)return;const t=e.emit,o=new(d.getBDConstructor()).Icon(e.icon,new(d.getBDConstructor()).Size(((i=e==null?void 0:e.iconStyle)==null?void 0:i.width)||25,((s=e==null?void 0:e.iconStyle)==null?void 0:s.height)||37)),n=new(d.getBDConstructor()).Marker(new(d.getBDConstructor()).Point(...f.transform([e.longitude,e.latitude],f.WGS84,f.BD09)),{icon:o,offset:new(d.getBDConstructor()).Size(...((l=e==null?void 0:e.iconStyle)==null?void 0:l.offset)||[0,-15])});return n.addEventListener("click",u=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(u,e),t&&Vue&&Vue.prototype.$bus.$emit(t,e)}),d.getBDInstance().addOverlay(n),{target:n,remove:()=>{d.getBDInstance()&&d.getBDInstance().removeOverlay(n)}}}_renderBDLabel(e){var i,s,l,u,c,a,m,y,b,E,_,h;if(e.hidLabel)return;const t=e.emit,o=e.content||`<div>${e.label}</div>`,n=new(d.getBDConstructor()).Label(o,{position:new(d.getBDConstructor()).Point(...f.transform([e.longitude,e.latitude],f.WGS84,f.BD09)),offset:new(d.getBDConstructor()).Size(...((i=e==null?void 0:e.labelStyle)==null?void 0:i.offset)||[0,-65])});return e.withoutBlueBorder?n.setStyle({border:"none",background:"none",cursor:"pointer"}):n.setStyle({color:((s=e==null?void 0:e.labelStyle)==null?void 0:s.color)||"#FFF",fontSize:((l=e==null?void 0:e.labelStyle)==null?void 0:l.fontSize)||"12px",height:((u=e==null?void 0:e.labelStyle)==null?void 0:u.height)||"24px",lineHeight:((c=e==null?void 0:e.labelStyle)==null?void 0:c.lineHeight)||"20px",padding:((a=e==null?void 0:e.labelStyle)==null?void 0:a.padding)||"2px 5px",border:((m=e==null?void 0:e.labelStyle)==null?void 0:m.border)||"1px solid #1ACAD4",borderRadius:((y=e==null?void 0:e.labelStyle)==null?void 0:y.borderRadius)||"0px",background:((b=e==null?void 0:e.labelStyle)==null?void 0:b.background)||"rgba(11, 30, 43, 0.83)",fontWeight:((E=e==null?void 0:e.labelStyle)==null?void 0:E.fontWeight)||"normal",transform:((_=e==null?void 0:e.labelStyle)==null?void 0:_.transform)||"translateX(-50%)",fontFamily:((h=e==null?void 0:e.labelStyle)==null?void 0:h.fontFamily)||"微软雅黑",cursor:"pointer"}),n.addEventListener("click",D=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(D,e),t&&Vue&&Vue.prototype.$bus.$emit(t,e)}),d.getBDInstance().addOverlay(n),{target:n,remove:()=>{d.getBDInstance()&&d.getBDInstance().removeOverlay(n)}}}renderBDCustom(e,t){var n,i,s,l;if(!e.custom&&!t)return;const o=new(d.getBDConstructor()).CustomOverlay(t||e.custom,{point:new(d.getBDConstructor()).Point(...f.transform([e.longitude,e.latitude],f.WGS84,f.BD09)),offsetX:((i=(n=e==null?void 0:e.customStyle)==null?void 0:n.offset)==null?void 0:i.x)||0,offsetY:((l=(s=e==null?void 0:e.customStyle)==null?void 0:s.offset)==null?void 0:l.y)||-65,map:d.getBDInstance()});return d.getBDInstance().addOverlay(o),{target:o,remove:()=>{d.getBDInstance()&&d.getBDInstance().removeOverlay(o)}}}deleteAllBDMap(){if(!d.getBDInstance())return;d.getBDInstance().clearOverlays(),d.getBDInstance().getOverlays().forEach(t=>d.getBDInstance().removeOverlay(t))}removeViews(){window.$view&&window.$view.webglLayer.canvas.remove()}}const j="MapPoint";class qe{constructor(){this.handlerEvent=null}static getOEConstructor(){return window.Cesium||window.Cesium}static getOEInstance(){return window.$viewer}drawCesium(e){this.handlerEvent||this.initClick();const t={};return t.polygon=e.polygonType===2?this.renderOEBoundary(e.polygon,e.polygonColor,e.polygonHeight):this._renderOEPolygon(e),t.icon=this.__renderOEIconByCanvas(e),t.label=this.__renderOELabelByCanvas(e),{target:t,remove:()=>{var o,n,i;(o=t.polygon)==null||o.remove(),(n=t.icon)==null||n.remove(),(i=t.label)==null||i.remove()}}}renderOEBoundary(e,t,o=1){const n=[...e,e[1]].map(s=>[s[0],s[1],o]).flat(2),i=Cesium.getOEInstance().entities.add({typeName:j,wall:{show:!0,positions:Cesium.getOEConstructor().Cartesian3.fromDegreesArrayHeights(n),material:Cesium.getOEConstructor().Color.fromCssColorString(t).withAlpha(.2),outlineColor:Cesium.getOEConstructor().Color.fromCssColorString(t),outline:!0}});return{target:[i],remove:()=>{Cesium.getOEInstance()&&Cesium.getOEInstance().entities.remove(i)}}}_renderOEPolygon(e){if(!e.polygon||e.hidPolyon)return;const t=e.polygon.flat(2),o=Cesium.getOEInstance().entities.add({typeName:j,polyline:{positions:Cesium.getOEConstructor().Cartesian3.fromDegreesArray(t),width:1,clampToGround:!0,material:Cesium.getOEConstructor().Color.fromCssColorString(e.borderColor)}}),n=Cesium.getOEInstance().entities.add({typeName:j,polygon:{hierarchy:Cesium.getOEConstructor().Cartesian3.fromDegreesArray(t),material:Cesium.getOEConstructor().Color.fromCssColorString(e.borderColor).withAlpha(e.borderOpacity||.2),extrudedHeight:e.borderHeight||1,closeTop:!0,closeBottom:!1}});return{target:[o,n],remove:()=>{Cesium.getOEInstance()&&(Cesium.getOEInstance().entities.remove(o),Cesium.getOEInstance().entities.remove(n))}}}__renderOEIconByCanvas(e){var o,n,i;let t={id:e.id+"_icon",name:e.label,position:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude,0),show:!e.hidIcon,billboard:{image:e.icon,width:((o=e==null?void 0:e.iconStyle)==null?void 0:o.width)||25,height:((n=e==null?void 0:e.iconStyle)==null?void 0:n.height)||37,pixelOffset:new Cesium.Cartesian2(0,-((((i=e==null?void 0:e.iconStyle)==null?void 0:i.height)||37)/2))},event:()=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(null,e),e.emit&&Vue&&Vue.prototype.$bus.$emit(e.emit,e)},removeCustom:e.removeCustom,data:e};return t=Cesium.getOEInstance().entities.add(t),{target:t,remove:()=>{Cesium.getOEInstance()&&Cesium.getOEInstance().entities.remove(t)}}}__renderOELabelByCanvas(e){var o,n,i,s,l;let t={id:e.id+"_label",name:e.label,position:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude,0),show:!e.hidLabel,label:{fillColor:Cesium.Color.fromCssColorString(((o=e==null?void 0:e.labelStyle)==null?void 0:o.color)||"white"),showBackground:!0,backgroundColor:Cesium.Color.fromCssColorString(((n=e==null?void 0:e.labelStyle)==null?void 0:n.background)||"rgba(11,30,43,0.6)"),text:e.label,font:((i=e==null?void 0:e.labelStyle)==null?void 0:i.font)||"12px sans-serif",backgroundPadding:new Cesium.Cartesian2(...((s=e==null?void 0:e.labelStyle)==null?void 0:s.padding)||[10,10]),pixelOffset:new Cesium.Cartesian2(0,-((((l=e==null?void 0:e.iconStyle)==null?void 0:l.height)||25)*1.5+10)),horizontalOrigin:Cesium.HorizontalOrigin.CENTER},event:()=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(null,e),e.emit&&Vue&&Vue.prototype.$bus.$emit(e.emit,e)},removeCustom:e.removeCustom,data:e};return t=Cesium.getOEInstance().entities.add(t),{target:t,remove:()=>{Cesium.getOEInstance()&&Cesium.getOEInstance().entities.remove(t)}}}initClick(){this.handlerEvent=new Cesium.ScreenSpaceEventHandler(Cesium.getOEInstance().scene.canvas),this.handlerEvent.setInputAction(e=>{var t=Cesium.getOEInstance().scene.pick(e.position);t&&t.id&&t.id.event&&t.id.event(null,t.id.data)},Cesium.ScreenSpaceEventType.LEFT_CLICK)}renderOECustom(e,t){var m;if(!e.custom&&!t)return;const o=document.querySelector(".cesium-viewer-cesiumWidgetContainer"),n=t?t():e.custom();n.style.position="absolute",n.style.top=0,n.style.left=0,n.setAttribute("data-one-map-sign-custom",!0),o.appendChild(n);const i=new(Cesium.getOEConstructor()).Cartesian2,s=Cesium.getOEInstance().scene,l=(((m=e==null?void 0:e.iconStyle)==null?void 0:m.height)||25)*1.5,u=(e==null?void 0:e.point3D)||[0,0];let c=null;!u[0]&&!u[1]&&(u[0]=e.longitude,u[1]=e.latitude);const a=()=>{Cesium.getOEConstructor().SceneTransforms.wgs84ToWindowCoordinates(s,Cesium.getOEConstructor().Cartesian3.fromDegrees(...u),i);const y=Math.round(i.y-n.offsetHeight-l)+"px",E=`translate(${Math.round(i.x-n.offsetWidth/2)+"px"},${y})`;E!==c&&(c=E,n.style.transform=E)};return a.dataCesiumSignCustom=!0,Cesium.getOEInstance().scene.postRender.addEventListener(a),{target:n,remove:()=>{var y;Cesium.getOEInstance()&&((y=n.parentNode)==null||y.removeChild(n),Cesium.getOEInstance().scene.postRender.removeEventListener(a))}}}deleteAllCesium(){if(!Cesium.getOEInstance())return;const e=document.querySelector(".cesium-viewer-cesiumWidgetContainer"),t=e==null?void 0:e.querySelectorAll("[data-one-map-sign-custom=true]");t==null||t.forEach(i=>{var s;(s=i.parentNode)==null||s.removeChild(i)}),Cesium.getOEInstance().scene.postRender._listeners.forEach(i=>{i.dataCesiumSignCustom&&Cesium.getOEInstance().scene.postRender.removeEventListener(i)}),[...Cesium.getOEInstance().entities.values].forEach(i=>{i._typeName===j&&Cesium.getOEInstance().entities.remove(i)})}_pauseLabelDialog(e){const t=e.querySelector('[data-dialog-content="true"]');t&&(t.addEventListener("wheel",o=>{o.stopPropagation()}),t.addEventListener("pointerdown",o=>{o.stopPropagation()}))}_proxyWheel(e){const t=e.parentNode.querySelector(".cesium-widget canvas"),o=["bubbles","cancelable","screenX","screenY","clientX","clientY","button","buttons"];let n=0;const i=s=>{const l={};return o.forEach(u=>l[u]=s[u]),l.pointerId=s.pointerId,l};e.addEventListener("wheel",function(s){const l=new WheelEvent("wheel",{deltaY:s.deltaY});t.dispatchEvent(l)}),e.addEventListener("pointerdown",function(s){n=Date.now();try{s==null||s.click()}catch{}const l=new PointerEvent("pointerdown",i(s));t.dispatchEvent(l)}),t.addEventListener("pointerup",function(s){if(n!==0){const l=i(s),u=Date.now()-n;u>20&&u<800&&e.dispatchEvent(new MouseEvent("click",{...l,pointerId:void 0})),n=0}})}}class Q extends Se(d,qe){constructor(e){super(),this.defaultBackgroundColor=(e==null?void 0:e.defaultBackgroundColor)||"#0090FF",this.defaultBorderColor=(e==null?void 0:e.defaultBorderColor)||"#0090FF",this.getColor=e==null?void 0:e.getColor,this.getIcon=e==null?void 0:e.getIcon,this.getColor=e==null?void 0:e.getColor,e!=null&&e.getCesiumInstance&&Q.setOEInstance(e==null?void 0:e.getCesiumInstance),e!=null&&e.getBDMapGlInstance&&Q.setBDInstance(e==null?void 0:e.getBDMapGlInstance)}static setOEInstance(e){Cesium.getOEInstance=e}static setBDInstance(e){Cesium.getBDInstance=e}create(e){return this.draw(e)}draw(e){return Cesium.getOEInstance()?this.drawCesiumList(e):(this.removeViews(),this.drawBDMapList(e))}renderCustom(e,t){return Cesium.getOEInstance()?this.renderOECustom(e,t):this.renderBDCustom(e,t)}deleteAll(){Cesium.getOEInstance()?this.deleteAllCesium():this.deleteAllBDMap()}renderBoundary(e,t,o){return Cesium.getOEInstance()?this.renderOEBoundary(e,t,o):this.renderBDBoundary(e,t,o)}drawCesiumList(e){const t=[],o={};return e.forEach(n=>{const i=this.handleData(n);if(!i)return;const s=this.drawCesium(i);t.push(s)}),this.getOEInstance(t,o)}drawBDMapList(e){const t=[],o={};return e.forEach(n=>{const i=this.handleData(n);if(!i)return;const s=this.drawBDMap(i);t.push(s)}),this.getOEInstance(t,o)}getOEInstance(e,t){const o=()=>{Object.keys(t).forEach(n=>{t[n].forEach(i=>i==null?void 0:i.remove()),t[n]=[]})};return{target:e,remove:()=>{e.remove&&e.remove(),e.forEach&&e.forEach(n=>n.remove()),o()},renderCustom:(n,i,s=!0,l=!0)=>{if(s&&t[n.id]&&t[n.id].length>0)return;l&&o();const u=this.renderCustom(n,i);return t[n.id]||(t[n.id]=[]),t[n.id].push(u),u},removeCustom:n=>{t[n.id]&&(t[n.id].forEach(i=>{i==null||i.remove()}),t[n.id]=[])},removeCustomAll:()=>{o()},includeCustom:n=>t[n.id]&&t[n.id].length>0}}handleData(e){return this.handleInfo(e),e}handleInfo(e){return!e.icon&&this.getIcon&&(e.icon=this.getIcon(e.iconType)),!e.backgroundColor&&this.getColor&&(e.backgroundColor=this.getColor(e.backgroundColorType)),!e.borderColor&&this.getColor&&(e.borderColor=this.getColor(e.borderColorType)),e.backgroundColor||(e.backgroundColor=this.defaultBackgroundColor),e.borderColor||(e.borderColor=this.defaultBorderColor),e}getRender(e,t){return function(){const o="RENDER_MAP_POPOVER_"+Date.now(),n=document.createElement("div"),i=document.createElement("div"),s={observer:null,vm:null};n.setAttribute("id",o),n.appendChild(i),t.mixins||(t.mixins=[]),t.mixins.push({methods:{getPoint(){return this.$parent.RENDER_DATA}}}),s.vm=new Vue({el:i,data:{RENDER_DATA:e},render:c=>c(t)});function l(){document.getElementById(o)||(s.vm.$destroy(),s.observer.disconnect(),s.vm=null,s.observer=null)}function u(){setTimeout(()=>{const c=n.parentNode;l(),c&&MutationObserver&&(s.observer=new MutationObserver(()=>l()),s.observer.observe(document.body,{childList:!0,subtree:!0}))},500)}return u(),n}}}const oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAAAXNSR0IArs4c6QAAATRJREFUOE/tkT9LQlEYxn/vLevSVp9AwtoEh6hFSPQi3DkcGxxsimhxEyKCRqM+QR+gsUXzD0RETs4GiYNTcKEWCdJz4lyverW9qTMceF9+53nf8zxCcHQqtUMkcoxSCb8l8sxodC3NZscvzaUzmSNErlBqDREDjZ9r/QEcSr1+Lzqd3sWyHolGV3FdaDSg44tMzifDYUK049wBB5TLEI9Dvw/5fBg0ymUDesAGxSJks9BqQak0D0LbgN/AMrYNsRh0uzAYLIJvBnwFtoLlZx8Jo1o/GPAC+DVrTlKpguhkch3bfgG2F+cF9RO9njPxcRO4RWQPpVZ8wLK+gCqWVZBq9T1wFnQut4Tn7eO6pz5YqVxSq7UE9DSZ+b312ThBOQ/3p4rTzPU/ODPob+w5CZK5CSfzA4MyhfTaismyAAAAAElFTkSuQmCC",Re={id:"cesiumContainer",class:"cesium-box"},Ye={__name:"index",props:["flyPoint"],setup(r){let e="",t=null,o=null,n=null;const i=r;return Oe(()=>{e=setInterval(()=>{window.Cesium&&(clearInterval(e),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",window.$viewer=new Cesium.Viewer("cesiumContainer"),Ie(window.$viewer,{longitude:114.44798458764086,latitude:22.782112133077288},!0),t=new Q({getCesiumInstance(){return window.$viewer}}),o=t.create(je.map((s,l)=>({id:l,...s,icon:oe,iconStyle:{width:10,height:22}}))))},1e3)}),_e(()=>{window.$viewer=null,o==null||o.remove(),n==null||n.remove()}),Ae(i,s=>{console.log(s.flyPoint),n==null||n.remove(),n=t.create([{id:99999999999,...s.flyPoint,icon:oe,iconStyle:{width:10,height:22}}])}),(s,l)=>(z(),he("div",Re))}},Ue=re(Ye,[["__scopeId","data-v-a3247bc7"]]),Ke={style:{"margin-bottom":"10px"}},Qe={style:{"margin-bottom":"10px"}},Xe={__name:"flyToTarget",emits:["flyPoint"],setup(r,{emit:e}){let t=M(""),o=M(""),n=M(""),i=M([]);const s=e;function l(){fetch(`https://api.tianditu.gov.cn/geocoder?ds={"keyWord":"${n.value}"}&tk=cd084de7e251a6d429ceb5cae01c4cd4`).then(function(c){return c.json()}).then(function(c){i.value=[{...c.location,longitude:c.location.lon,latitude:c.location.lat}]}).catch(function(c){})}function u(c){const{longitude:a,latitude:m}=c;a&&m&&(Ie(window.$viewer,{longitude:a,latitude:m},!0),s("flyPoint",{label:c.keyWord,longitude:a,latitude:m}))}return(c,a)=>{const m=P("el-input"),y=P("el-button"),b=P("el-table-column"),E=P("el-table"),_=P("el-card");return z(),ie(_,{class:"box-card"},{default:A(()=>[g("div",Ke,[p(" 经度："),w(m,{modelValue:B(t),"onUpdate:modelValue":a[0]||(a[0]=h=>ee(t)?t.value=h:t=h),style:{width:"200px"}},null,8,["modelValue"])]),g("div",Qe,[p(" 纬度："),w(m,{modelValue:B(o),"onUpdate:modelValue":a[1]||(a[1]=h=>ee(o)?o.value=h:o=h),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),w(y,{type:"primary",onClick:a[2]||(a[2]=h=>u({longitude:B(t),latitude:B(o)}))},{default:A(()=>[p("飞行")]),_:1})]),p(" 搜索地名："),w(m,{modelValue:B(n),"onUpdate:modelValue":a[3]||(a[3]=h=>ee(n)?n.value=h:n=h),onChange:l,style:{width:"200px"}},null,8,["modelValue"]),w(E,{data:B(i),height:"250",style:{width:"100%","margin-top":"10px"}},{default:A(()=>[w(b,{prop:"keyWord",label:"地名"}),w(b,{prop:"longitude",label:"经度"}),w(b,{prop:"latitude",label:"维度"}),w(b,{label:"操作",width:"60"},{default:A(h=>[w(y,{link:"",type:"primary",size:"small",onClick:D=>u(h.row)},{default:A(()=>[p(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}},Ze=re(Xe,[["__scopeId","data-v-94b66585"]]),et={style:{margin:"0 0 10px 5px",display:"flex","align-items":"center"}},tt={style:{"margin-left":"10px"}},nt={style:{color:"#409eff"}},ot={style:{color:"#e6a23c"}},rt={style:{color:"#67c23a"}},it={__name:"getPoint",setup(r){const e=M({longitude:null,latitude:null}),t=M({longitude:null,latitude:null}),o=M({longitude:null,latitude:null,altitude:null});function n(){ne(s=>{o.value=s.WGS84,t.value=s.GCJ02,e.value=s.BD09})}function i(){De()}return(s,l)=>{const u=P("el-button"),c=P("el-card");return z(),ie(c,{class:"box-card"},{default:A(()=>[g("div",et,[w(u,{type:"primary",onClick:n},{default:A(()=>[p("获取坐标")]),_:1}),w(u,{type:"primary",onClick:i},{default:A(()=>[p("取消获取")]),_:1}),g("div",tt,[g("div",nt,[p(" 84坐标： "),g("span",null,F(o.value.longitude),1),p("_"),g("span",null,F(o.value.latitude),1)]),g("div",ot,[p(" 百度坐标： "),g("span",null,F(e.value.longitude),1),p("_"),g("span",null,F(e.value.latitude),1)]),g("div",rt,[p(" 火星坐标： "),g("span",null,F(t.value.longitude),1),p("_"),g("span",null,F(t.value.latitude),1)])])])]),_:1})}}};class st{constructor(){this.pointArr=[],this.distanceEntities=[],this.areaEntities=[]}initViewer(e){this.viewer=e||window.$viewer}checkViewer(){return this.viewer||(this.viewer=window.$viewer),!!this.viewer}getPoint(e,t){if(!this.checkViewer())return"地图尚未初始化";this.pointArr.push(t);const n=this.viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(...t),billboard:new Cesium.BillboardGraphics({image:oe,scale:1,pixelOffset:new Cesium.Cartesian2(0,-10)}),label:{text:`经度：${t[0]}
纬度：${t[1]}`,font:"12px Microsoft YaHei",showBackground:!0,fillColor:Cesium.Color.fromCssColorString("#FFE000"),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,pixelOffset:new Cesium.Cartesian2(0,-80),pixelOffsetScaleByDistance:new Cesium.NearFarScalar(10,1,200,.5),outlineColor:Cesium.Color.fromCssColorString("#fff")}});if(e==="distance"){if(this.distanceEntities.push(n),this.pointArr.length<=1)return;this.drawDistance(this.pointArr[this.pointArr.length-2],this.pointArr[this.pointArr.length-1])}else if(e==="area"){if(this.areaEntities.push(n),this.pointArr.length<=2)return;this.drawArea()}}drawDistance(e,t){if(!this.checkViewer())return"地图尚未初始化";const n=Cesium.Cartesian3.distance(Cesium.Cartesian3.fromDegrees(...e),Cesium.Cartesian3.fromDegrees(...t)).toFixed(2),i=this.viewer.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArray([...e,...t]),width:2,material:Cesium.Color.fromCssColorString("#FFE000").withAlpha(.5),clampToGround:!1},label:{text:`${n}米`,font:"14px Microsoft YaHei",showBackground:!0,fillColor:Cesium.Color.fromCssColorString("#FFE000"),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,pixelOffset:new Cesium.Cartesian2(0,-50),pixelOffsetScaleByDistance:new Cesium.NearFarScalar(10,1,200,.5),outlineColor:Cesium.Color.fromCssColorString("#fff")},position:Cesium.Cartesian3.fromDegrees((e[0]+t[0])/2,(e[1]+t[1])/2)});this.distanceEntities.push(i)}drawArea(){if(!this.checkViewer())return"地图尚未初始化";this.viewer.entities.removeById("drawArea");const o=(s=>{let l=s.length,u=0,c=0,a=0;for(let b=0;b<l;b++){if(!s[b])continue;let E=s[b],_,h,D,T,I;h=parseFloat(E[0])*Math.PI/180,_=parseFloat(E[1])*Math.PI/180,D=Math.cos(_)*Math.cos(h),T=Math.cos(_)*Math.sin(h),I=Math.sin(_),u+=D,c+=T,a+=I}u=u/l,c=c/l,a=a/l;let m=Math.atan2(c,u),y=Math.atan2(a,Math.sqrt(u*u+c*c));return[m*180/Math.PI,y*180/Math.PI]})(this.pointArr),n=this.calculateArea(Cesium.Cartesian3.fromDegreesArray([...this.pointArr].flat())).toFixed(2),i=this.viewer.entities.add({id:"drawArea",polygon:{hierarchy:Cesium.Cartesian3.fromDegreesArray([...this.pointArr].flat()),extrudedHeight:1,perPositionHeight:!0,material:Cesium.Color.fromCssColorString("rgba(255,255,255,0.1)"),outline:!0,outlineColor:Cesium.Color.fromCssColorString("#FFD200"),closeTop:!1,closeBottom:!0},position:Cesium.Cartesian3.fromDegrees(...o,0),label:{text:`${n}平方米`,font:"14px Microsoft YaHei",showBackground:!1,fillColor:Cesium.Color.fromCssColorString("#FFE000"),backgroundColor:Cesium.Color.fromCssColorString("rgba(7, 23, 32, 0.85)"),backgroundPadding:new Cesium.Cartesian2(10,8),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,pixelOffset:new Cesium.Cartesian2(-0,-0),pixelOffsetScaleByDistance:new Cesium.NearFarScalar(10,1,200,.5),outlineColor:Cesium.Color.fromCssColorString("#fff")}});this.areaEntities.push(i)}triangleArea(e,t,o){let n=Cesium.Cartesian3.subtract(e,t,new Cesium.Cartesian3),i=Cesium.Cartesian3.subtract(o,t,new Cesium.Cartesian3),s=Cesium.Cartesian3.cross(n,i,n);return Cesium.Cartesian3.magnitude(s)*.5}calculateArea(e){let t=0;if(!Array.isArray(e))return t;e[0]instanceof Cesium.Cartesian3||(e=Transform.transformWGS84ArrayToCartesianArray(e));let o=Cesium.CoplanarPolygonGeometry.createGeometry(Cesium.CoplanarPolygonGeometry.fromPositions({positions:e,vertexFormat:Cesium.VertexFormat.POSITION_ONLY}));if(!o)return t;let n=o.attributes.position.values,i=o.indices;for(let s=0;s<i.length;s+=3){let l=Cesium.Cartesian3.unpack(n,i[s]*3,new Cesium.Cartesian3),u=Cesium.Cartesian3.unpack(n,i[s+1]*3,new Cesium.Cartesian3),c=Cesium.Cartesian3.unpack(n,i[s+2]*3,new Cesium.Cartesian3);t+=this.triangleArea(l,u,c)}return t}deleteDistance(){if(!this.checkViewer())return"地图尚未初始化";this.distanceEntities.forEach(t=>{this.viewer.entities.remove(t)}),this.distanceEntities=[],this.pointArr=[]}deleteArea(){if(!this.checkViewer())return"地图尚未初始化";this.areaEntities.forEach(t=>{this.viewer.entities.remove(t)}),this.areaEntities=[],this.pointArr=[]}delete(){if(!this.checkViewer())return"地图尚未初始化";this.viewer&&(this.viewer._container.style.cursor="default",this.deleteDistance(),this.deleteArea()),this.pointArr=[]}}const lt={__name:"index",setup(r){let e=M(!1),t=M(!1);const o=new st;function n(){e.value=!e.value,e.value?ne(s=>{o.getPoint("distance",[s.WGS84.longitude,s.WGS84.latitude])}):o.deleteDistance()}function i(){t.value=!t.value,t.value?ne(s=>o.getPoint("area",[s.WGS84.longitude,s.WGS84.latitude])):o.deleteArea()}return(s,l)=>{const u=P("el-button"),c=P("el-card");return z(),ie(c,{class:"box-card"},{default:A(()=>[w(u,{onClick:n,type:B(e)?"danger":"primary"},{default:A(()=>[p(F(B(e)?"退出测量":"测量距离"),1)]),_:1},8,["type"]),w(u,{onClick:i,type:B(t)?"danger":"primary"},{default:A(()=>[p(F(B(t)?"退出测量":"测量面积"),1)]),_:1},8,["type"])]),_:1})}}},ut=re(lt,[["__scopeId","data-v-96c635f6"]]),ct=g("h1",{id:"地图",tabindex:"-1"},[p("地图 "),g("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),at=g("h2",{id:"cesium地图",tabindex:"-1"},[p("Cesium地图 "),g("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),dt=g("h2",{id:"获取坐标",tabindex:"-1"},[p("获取坐标 "),g("a",{class:"header-anchor",href:"#获取坐标","aria-label":'Permalink to "获取坐标"'},"​")],-1),mt=g("h2",{id:"飞行方法",tabindex:"-1"},[p("飞行方法 "),g("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),Ct=g("h2",{id:"测量",tabindex:"-1"},[p("测量 "),g("a",{class:"header-anchor",href:"#测量","aria-label":'Permalink to "测量"'},"​")],-1),pt=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md","filePath":"component_library/地图.md"}'),gt={name:"component_library/地图.md"},yt=Object.assign(gt,{setup(r){const e=M("");function t(o){e.value=o}return(o,n)=>(z(),he("div",null,[ct,at,w(Ue,{flyPoint:e.value},null,8,["flyPoint"]),dt,w(it),mt,w(Ze,{onFlyPoint:t}),Ct,w(ut)]))}});export{pt as __pageData,yt as default};
