import{al as j,o as J,E as Y,j as C,k as M,r as b,ad as g,K as z,L as f,l as c,a3 as s,O as l,u as h,t as y}from"./chunks/framework.D2ER4MPC.js";const E={id:"cesiumContainer",class:"cesium-box"},P={__name:"index",setup(x){let i="";return J(()=>{i=setInterval(()=>{window.Cesium&&(clearInterval(i),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",window.$viewer=new Cesium.Viewer("cesiumContainer"))},1e3),Y(()=>{window.$viewer=null})}),(d,_)=>(C(),M("div",E))}},R=j(P,[["__scopeId","data-v-0afed965"]]),B={style:{"margin-bottom":"10px"}},U={style:{"margin-bottom":"10px"}},L={__name:"flyToTarget",props:{$viewer:{type:Object,required:!0}},setup(x){let i=b(""),d=b(""),_=b(""),k=b([]);function T(t,e,o=!1){const u=Object.prototype.toString.call(e);let{longitude:n,latitude:r,altitude:m,heading:a,pitch:p,roll:V}={longitude:120.5,latitude:28.8856,altitude:2080359375e-2,heading:360,pitch:-89.99,roll:0};if(e){if(u!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");n=Number(e.longitude),r=Number(e.latitude),m=Number(e.altitude||3e3)}if(e&&!o){const O=v(t),D=Cesium.Cartesian3.fromDegrees(n,r);a=O.heading,p=O.pitch;let N=m||3e3;t.camera.lookAt(D,new Cesium.HeadingPitchRange(a,p,N)),t.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else t.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(n,r,m),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-89.99),roll:0}})}function v(t){const e=t.camera,o=OneMap.Cartographic.fromCartesian(e.position),u=OneMap.Math.toDegrees(o.longitude),n=OneMap.Math.toDegrees(o.latitude),r=o.height;let m=OneMap.Cartographic.fromDegrees(u,n,r),p=t.scene.globe.ellipsoid.cartographicToCartesian(m);return{longitude:u,latitude:n,height:r,x:p.x,y:p.y,z:p.z,heading:e.heading,pitch:e.pitch,roll:e.roll}}function I(){fetch(`https://api.tianditu.gov.cn/geocoder?ds={"keyWord":"${_.value}"}&tk=cd084de7e251a6d429ceb5cae01c4cd4`).then(function(t){return t.json()}).then(function(t){k.value=[{...t.location,longitude:t.location.lon,latitude:t.location.lat}]}).catch(function(t){})}function w(t){const{longitude:e,latitude:o}=t;e&&o&&T(window.$viewer,{longitude:e,latitude:o},!0)}return(t,e)=>{const o=g("el-input"),u=g("el-button"),n=g("el-table-column"),r=g("el-table"),m=g("el-card");return C(),z(m,{class:"box-card"},{default:f(()=>[c("div",B,[s(" 经度："),l(o,{modelValue:h(i),"onUpdate:modelValue":e[0]||(e[0]=a=>y(i)?i.value=a:i=a),style:{width:"200px"}},null,8,["modelValue"])]),c("div",U,[s(" 纬度："),l(o,{modelValue:h(d),"onUpdate:modelValue":e[1]||(e[1]=a=>y(d)?d.value=a:d=a),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),l(u,{type:"primary",onClick:e[2]||(e[2]=a=>w({longitude:h(i),latitude:h(d)}))},{default:f(()=>[s("飞行")]),_:1})]),s(" 搜索地名："),l(o,{modelValue:h(_),"onUpdate:modelValue":e[3]||(e[3]=a=>y(_)?_.value=a:_=a),onChange:I,style:{width:"200px"}},null,8,["modelValue"]),l(r,{data:h(k),height:"250",style:{width:"100%","margin-top":"10px"}},{default:f(()=>[l(n,{prop:"keyWord",label:"地名"}),l(n,{prop:"longitude",label:"经度"}),l(n,{prop:"latitude",label:"维度"}),l(n,{label:"操作",width:"60"},{default:f(a=>[l(u,{link:"",type:"primary",size:"small",onClick:p=>w(a.row)},{default:f(()=>[s(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}},W=j(L,[["__scopeId","data-v-abdd2c14"]]),$=c("h1",{id:"地图",tabindex:"-1"},[s("地图 "),c("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),q=c("h2",{id:"cesium地图",tabindex:"-1"},[s("Cesium地图 "),c("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),A=c("h2",{id:"飞行方法",tabindex:"-1"},[s("飞行方法 "),c("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),K=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md","filePath":"component_library/地图.md"}'),F={name:"component_library/地图.md"},S=Object.assign(F,{setup(x){return(i,d)=>(C(),M("div",null,[$,q,l(R),A,l(W)]))}});export{K as __pageData,S as default};
