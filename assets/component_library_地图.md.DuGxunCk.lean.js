import{M as De}from"./chunks/index.Cpk6PsSN.js";import{al as ge,o as Ie,E as Se,j as Q,k as Ce,r as x,ad as A,K as de,L as M,l as f,a3 as y,O as b,u as k,t as ee,Q as L}from"./chunks/framework.BKKfdz-C.js";/**
 * @preserve
 * gcoord 1.0.6, geographic coordinate library
 * Copyright (c) 2024 Jiulong Hu <me@hujiulong.com>
 */const{sin:v,cos:Oe,sqrt:ne,abs:q,PI:w}=Math,oe=6378245,re=.006693421622965823;function fe(r,e){return r>=72.004&&r<=137.8347&&e>=.8293&&e<=55.8271}function Be(r,e){let t=-100+2*r+3*e+.2*e*e+.1*r*e+.2*ne(q(r));return t+=(20*v(6*r*w)+20*v(2*r*w))*2/3,t+=(20*v(e*w)+40*v(e/3*w))*2/3,t+=(160*v(e/12*w)+320*v(e*w/30))*2/3,t}function _e(r,e){let t=300+r+2*e+.1*r*r+.1*r*e+.1*ne(q(r));return t+=(20*v(6*r*w)+20*v(2*r*w))*2/3,t+=(20*v(r*w)+40*v(r/3*w))*2/3,t+=(150*v(r/12*w)+300*v(r/30*w))*2/3,t}function Me(r,e){let t=_e(r-105,e-35),o=Be(r-105,e-35);const n=e/180*w;let i=v(n);i=1-re*i*i;const s=ne(i);return t=t*180/(oe/s*Oe(n)*w),o=o*180/(oe*(1-re)/(i*s)*w),[t,o]}function P(r){const[e,t]=r;if(!fe(e,t))return[e,t];const o=Me(e,t);return[e+o[0],t+o[1]]}function T(r){const[e,t]=r;if(!fe(e,t))return[e,t];let[o,n]=[e,t],i=P([o,n]),s=i[0]-e,l=i[1]-t;for(;q(s)>1e-6||q(l)>1e-6;)o-=s,n-=l,i=P([o,n]),s=i[0]-e,l=i[1]-t;return[o,n]}const{sin:H,cos:R,atan2:he,sqrt:ye,PI:Pe}=Math,Y=Pe*3e3/180;function F(r){const[e,t]=r,o=e-.0065,n=t-.006,i=ye(o*o+n*n)-2e-5*H(n*Y),s=he(n,o)-3e-6*R(o*Y),l=i*R(s),c=i*H(s);return[l,c]}function W(r){const[e,t]=r,o=e,n=t,i=ye(o*o+n*n)+2e-5*H(n*Y),s=he(n,o)+3e-6*R(o*Y),l=i*R(s)+.0065,c=i*H(s)+.006;return[l,c]}const ie=180/Math.PI,se=Math.PI/180,U=6378137,B=20037508342789244e-9;function z(r){return[r[0]*ie/U,(Math.PI*.5-2*Math.atan(Math.exp(-r[1]/U)))*ie]}function X(r){const e=Math.abs(r[0])<=180?r[0]:r[0]-(r[0]<0?-1:1)*360,t=[U*e*se,U*Math.log(Math.tan(Math.PI*.25+.5*r[1]*se))];return t[0]>B&&(t[0]=B),t[0]<-B&&(t[0]=-B),t[1]>B&&(t[1]=B),t[1]<-B&&(t[1]=-B),t}const{abs:te}=Math,le=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],ce=[75,60,45,30,15,0],Ge=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Ae=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function pe(r,e,t){const o=te(e)/t[9];let n=t[0]+t[1]*te(r),i=t[2]+t[3]*o+t[4]*Math.pow(o,2)+t[5]*Math.pow(o,3)+t[6]*Math.pow(o,4)+t[7]*Math.pow(o,5)+t[8]*Math.pow(o,6);return n*=r<0?-1:1,i*=e<0?-1:1,[n,i]}function Z(r){const[e,t]=r;let o=[];for(let n=0;n<ce.length;n++)if(te(t)>ce[n]){o=Ae[n];break}return pe(e,t,o)}function J(r){const[e,t]=r;let o=[];for(let n=0;n<le.length;n++)if(t>=le[n]){o=Ge[n];break}return pe(e,t,o)}function _(r,e){if(!r)throw new Error(e)}function be(r){return!!r&&Object.prototype.toString.call(r)==="[object Array]"}function ue(r){return!isNaN(Number(r))&&r!==null&&!be(r)}function E(...r){const e=r.length-1;return function(...t){let o=e,n=r[e].apply(null,t);for(;o--;)n=r[o].call(null,n);return n}}function we(r,e,t=!1){if(r===null)return;let o,n,i,s,l,c,a=0,g=0,h,p;const{type:S}=r,C=S==="FeatureCollection",$=S==="Feature",N=C?r.features.length:1;for(let I=0;I<N;I++){h=C?r.features[I].geometry:$?r.geometry:r,p=h?h.type==="GeometryCollection":!1,c=p?h.geometries.length:1;for(let V=0;V<c;V++){let D=0,G=0;if(s=p?h.geometries[V]:h,s===null)continue;const O=s.type;switch(a=t&&(O==="Polygon"||O==="MultiPolygon")?1:0,O){case null:break;case"Point":if(l=s.coordinates,e(l,g,I,D,G)===!1)return!1;g++,D++;break;case"LineString":case"MultiPoint":for(l=s.coordinates,o=0;o<l.length;o++){if(e(l[o],g,I,D,G)===!1)return!1;g++,O==="MultiPoint"&&D++}O==="LineString"&&D++;break;case"Polygon":case"MultiLineString":for(l=s.coordinates,o=0;o<l.length;o++){for(n=0;n<l[o].length-a;n++){if(e(l[o][n],g,I,D,G)===!1)return!1;g++}O==="MultiLineString"&&D++,O==="Polygon"&&G++}O==="Polygon"&&D++;break;case"MultiPolygon":for(l=s.coordinates,o=0;o<l.length;o++){for(G=0,n=0;n<l[o].length;n++){for(i=0;i<l[o][n].length-a;i++){if(e(l[o][n][i],g,I,D,G)===!1)return!1;g++}G++}D++}break;case"GeometryCollection":for(o=0;o<s.geometries.length;o++)if(we(s.geometries[o],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}var m;(function(r){r.WGS84="WGS84",r.WGS1984="WGS84",r.EPSG4326="WGS84",r.GCJ02="GCJ02",r.AMap="GCJ02",r.BD09="BD09",r.BD09LL="BD09",r.Baidu="BD09",r.BMap="BD09",r.BD09MC="BD09MC",r.BD09Meter="BD09MC",r.EPSG3857="EPSG3857",r.EPSG900913="EPSG3857",r.EPSG102100="EPSG3857",r.WebMercator="EPSG3857",r.WM="EPSG3857"})(m||(m={}));const xe={to:{[m.GCJ02]:P,[m.BD09]:E(W,P),[m.BD09MC]:E(Z,W,P),[m.EPSG3857]:X}},ke={to:{[m.WGS84]:T,[m.BD09]:W,[m.BD09MC]:E(Z,W),[m.EPSG3857]:E(X,T)}},Le={to:{[m.WGS84]:E(T,F),[m.GCJ02]:F,[m.EPSG3857]:E(X,T,F),[m.BD09MC]:Z}},Fe={to:{[m.WGS84]:z,[m.GCJ02]:E(P,z),[m.BD09]:E(W,P,z),[m.BD09MC]:E(Z,W,P,z)}},Te={to:{[m.WGS84]:E(T,F,J),[m.GCJ02]:E(F,J),[m.EPSG3857]:E(X,T,F,J),[m.BD09]:J}},We={WGS84:xe,GCJ02:ke,BD09:Le,EPSG3857:Fe,BD09MC:Te};var $e=We;function Ne(r,e,t){if(_(!!r,"The args[0] input coordinate is required"),_(!!e,"The args[1] original coordinate system is required"),_(!!t,"The args[2] target coordinate system is required"),e===t)return r;const o=$e[e];_(!!o,`Invalid original coordinate system: ${e}`);const n=o.to[t];_(!!n,`Invalid target coordinate system: ${t}`);const i=typeof r;if(_(i==="string"||i==="object",`Invalid input coordinate type: ${i}`),i==="string")try{r=JSON.parse(r)}catch{throw new Error(`Invalid input coordinate: ${r}`)}let s=!1;be(r)&&(_(r.length>=2,`Invalid input coordinate: ${r}`),_(ue(r[0])&&ue(r[1]),`Invalid input coordinate: ${r}`),r=r.map(Number),s=!0);const l=n;return s?l(r):(we(r,c=>{[c[0],c[1]]=l(c)}),r)}const d=Object.assign(Object.assign({},m),{CRSTypes:m,transform:Ne}),Ve=(r,e,t=!0)=>{e=e||window.$viewer,window.elementForCesiumCoordinate=document.createElement("div"),window.elementForCesiumCoordinate.style.cssText=`
      position: absolute;
      pointer-events: none;
      z-index: 100; 
      top:0;
      left: 0;
      background: white;
      padding: 5px;
      color: black;
      font-size: 12px;
    `,document.querySelector(".cesium-viewer").append(window.elementForCesiumCoordinate),t||(window.elementForCesiumCoordinate.style.display="block"),window.HeadlerForCesiumCoordinate||(window.HeadlerForCesiumCoordinate=new Cesium.ScreenSpaceEventHandler(e.canvas)),e._container.style.cursor="crosshair",window.HeadlerForCesiumCoordinate.setInputAction(o=>{const n=ae(o,e),i=Object.prototype.toString.call(r),s=d.transform([n.x,n.y],d.WGS84,d.BD09),l=d.transform([n.x,n.y],d.WGS84,d.GCJ02),c={WGS84:{longitude:n.x,latitude:n.y,altitude:n.z},BD09:{longitude:s[0],latitude:s[1]},GCJ02:{longitude:l[0],latitude:l[1]}};return r&&["[object Function]","[object AsyncFunction]"].includes(i)&&r(c),c},Cesium.ScreenSpaceEventType.LEFT_CLICK),window.HeadlerForCesiumCoordinate.setInputAction(o=>{ve(e)},Cesium.ScreenSpaceEventType.RIGHT_CLICK),window.HeadlerForCesiumCoordinate.setInputAction(o=>{if(!window.elementForCesiumCoordinate)return;window.elementForCesiumCoordinate.style.transform=`translate(${o.endPosition.x+5+"px"}, ${o.endPosition.y-30+"px"})`;const n=ae({position:o.endPosition},e);window.elementForCesiumCoordinate.innerText=`当前位置为：经度：${n.x}, 纬度：${n.y}`},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},ve=r=>{r=r||window.$viewer,r._container.style.cursor="default",window.elementForCesiumCoordinate&&(document.querySelector(".cesium-viewer").removeChild(window.elementForCesiumCoordinate),window.elementForCesiumCoordinate=null),window.HeadlerForCesiumCoordinate&&(window.HeadlerForCesiumCoordinate.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),window.HeadlerForCesiumCoordinate.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),window.HeadlerForCesiumCoordinate=null)},ae=(r,e)=>{e=e||window.$viewer;const t=e.scene.camera.pickEllipsoid(r.position,e.scene.globe.ellipsoid),o=me(t),n=e.scene.pickPosition(r.position),i=me(n);return i.z>0?i:o},me=r=>{if(!r)return{x:0,y:0,z:0};const e=Cesium.Ellipsoid.WGS84.cartesianToCartographic(r);return new Cesium.Cartesian3(Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height)},Ee=(r,e,t=!1)=>{const o=Object.prototype.toString.call(e);let{longitude:n,latitude:i,altitude:s,heading:l,pitch:c,roll:a}={longitude:120.5,latitude:28.8856,altitude:2080359375e-2,heading:360,pitch:-89.99,roll:0};if(e){if(o!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");n=Number(e.longitude),i=Number(e.latitude),s=Number(e.altitude||3e3)}if(e&&!t){const g=ze(r),h=Cesium.Cartesian3.fromDegrees(n,i);l=g.heading,c=g.pitch;let p=s||3e3;r.camera.lookAt(h,new Cesium.HeadingPitchRange(l,c,p)),r.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else r.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(n,i,s),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-89.99),roll:0}})},ze=r=>{const e=r.camera,t=Cesium.Cartographic.fromCartesian(e.position),o=Cesium.Math.toDegrees(t.longitude),n=Cesium.Math.toDegrees(t.latitude),i=t.height;let s=Cesium.Cartographic.fromDegrees(o,n,i),c=r.scene.globe.ellipsoid.cartographicToCartesian(s);return{longitude:o,latitude:n,height:i,x:c.x,y:c.y,z:c.z,heading:e.heading,pitch:e.pitch,roll:e.roll}},Je=[{label:"本因坊",longitude:"114.4479428170782",latitude:"22.782362599302754"},{label:"仁和卫城",longitude:"114.47419695241648",latitude:"22.763874414125794"},{label:"创新大厦",longitude:"114.50086394615684",latitude:"22.744472406189676"},{label:"翡翠山",longitude:"114.47932275971425",latitude:"22.76172533394647"},{label:"万达广场",longitude:"114.47529392770444",latitude:"22.757991509952884"},{label:"坭生墩",longitude:"114.33745767119868",latitude:"22.859287960097454"},{label:"伯恩",longitude:"114.38476181939144",latitude:"22.764681736075786"},{label:"恒诚公寓",longitude:"113.78342222916902",latitude:"22.692325073831128"},{label:"吉阳智能",longitude:"113.78163391707902",latitude:"22.690373688853043"},{label:"扯皮男",longitude:"113.38715011567169",latitude:"23.118192591947963"},{label:"保利鱼珠港",longitude:"113.41436618261955",latitude:"23.104199537728352"},{label:"全丰商业大厦",longitude:"113.35837104578289",latitude:"23.11950792271978"},{label:"都格",longitude:"114.47785503398983",latitude:"22.59045883748482"},{label:"智达楼",longitude:"114.23437265711601",latitude:"22.320806008777648"}];class u{constructor(){}static getBDConstructor(){return window.BMapGL}static getBDInstance(){return window.$bdglmap}drawBDMap(e){const t={};return t.polygon=this._renderBDPolygon(e),t.icon=this._renderBDIcon(e),t.label=this._renderBDLabel(e),{target:t,remove:()=>{var o,n,i;(o=t.polygon)==null||o.remove(),(n=t.icon)==null||n.remove(),(i=t.label)==null||i.remove()}}}renderBDBoundary(e,t){const o=e.map(i=>new(u.getBDConstructor()).Point(...d.transform([i[0],i[1]],d.WGS84,d.BD09))),n=new(u.getBDConstructor()).Polygon(o,{strokeColor:t,strokeWeight:2,strokeOpacity:1,fillColor:t,fillOpacity:0});return u.getBDInstance().addOverlay(n),{target:n,remove:()=>{u.getBDInstance()&&u.getBDInstance().removeOverlay(n)}}}_renderBDPolygon(e){if(e.hidPolygon||!e.polygon)return;const t=e.polygon.map(n=>new(u.getBDConstructor()).Point(...d.transform([n[0],n[1]],d.WGS84,d.BD09))),o=new(u.getBDConstructor()).Polygon(t,{strokeColor:e.borderColor,strokeWeight:1,strokeOpacity:1,fillColor:e.backgroundColor,fillOpacity:.2});return u.getBDInstance().addOverlay(o),{target:o,remove:()=>{u.getBDInstance()&&u.getBDInstance().removeOverlay(o)}}}_renderBDIcon(e){var i,s,l;if(e.hidIcon)return;const t=e.emit,o=new(u.getBDConstructor()).Icon(e.icon,new(u.getBDConstructor()).Size(((i=e==null?void 0:e.iconStyle)==null?void 0:i.width)||25,((s=e==null?void 0:e.iconStyle)==null?void 0:s.height)||37)),n=new(u.getBDConstructor()).Marker(new(u.getBDConstructor()).Point(...d.transform([e.longitude,e.latitude],d.WGS84,d.BD09)),{icon:o,offset:new(u.getBDConstructor()).Size(...((l=e==null?void 0:e.iconStyle)==null?void 0:l.offset)||[0,-15])});return n.addEventListener("click",c=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(c,e),t&&Vue&&Vue.prototype.$bus.$emit(t,e)}),u.getBDInstance().addOverlay(n),{target:n,remove:()=>{u.getBDInstance()&&u.getBDInstance().removeOverlay(n)}}}_renderBDLabel(e){var i,s,l,c,a,g,h,p,S,C,$,N;if(e.hidLabel)return;const t=e.emit,o=e.content||`<div>${e.label}</div>`,n=new(u.getBDConstructor()).Label(o,{position:new(u.getBDConstructor()).Point(...d.transform([e.longitude,e.latitude],d.WGS84,d.BD09)),offset:new(u.getBDConstructor()).Size(...((i=e==null?void 0:e.labelStyle)==null?void 0:i.offset)||[0,-65])});return e.withoutBlueBorder?n.setStyle({border:"none",background:"none",cursor:"pointer"}):n.setStyle({color:((s=e==null?void 0:e.labelStyle)==null?void 0:s.color)||"#FFF",fontSize:((l=e==null?void 0:e.labelStyle)==null?void 0:l.fontSize)||"12px",height:((c=e==null?void 0:e.labelStyle)==null?void 0:c.height)||"24px",lineHeight:((a=e==null?void 0:e.labelStyle)==null?void 0:a.lineHeight)||"20px",padding:((g=e==null?void 0:e.labelStyle)==null?void 0:g.padding)||"2px 5px",border:((h=e==null?void 0:e.labelStyle)==null?void 0:h.border)||"1px solid #1ACAD4",borderRadius:((p=e==null?void 0:e.labelStyle)==null?void 0:p.borderRadius)||"0px",background:((S=e==null?void 0:e.labelStyle)==null?void 0:S.background)||"rgba(11, 30, 43, 0.83)",fontWeight:((C=e==null?void 0:e.labelStyle)==null?void 0:C.fontWeight)||"normal",transform:(($=e==null?void 0:e.labelStyle)==null?void 0:$.transform)||"translateX(-50%)",fontFamily:((N=e==null?void 0:e.labelStyle)==null?void 0:N.fontFamily)||"微软雅黑",cursor:"pointer"}),n.addEventListener("click",I=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(I,e),t&&Vue&&Vue.prototype.$bus.$emit(t,e)}),u.getBDInstance().addOverlay(n),{target:n,remove:()=>{u.getBDInstance()&&u.getBDInstance().removeOverlay(n)}}}renderBDCustom(e,t){var n,i,s,l;if(!e.custom&&!t)return;const o=new(u.getBDConstructor()).CustomOverlay(t||e.custom,{point:new(u.getBDConstructor()).Point(...d.transform([e.longitude,e.latitude],d.WGS84,d.BD09)),offsetX:((i=(n=e==null?void 0:e.customStyle)==null?void 0:n.offset)==null?void 0:i.x)||0,offsetY:((l=(s=e==null?void 0:e.customStyle)==null?void 0:s.offset)==null?void 0:l.y)||-65,map:u.getBDInstance()});return u.getBDInstance().addOverlay(o),{target:o,remove:()=>{u.getBDInstance()&&u.getBDInstance().removeOverlay(o)}}}deleteAllBDMap(){if(!u.getBDInstance())return;u.getBDInstance().clearOverlays(),u.getBDInstance().getOverlays().forEach(t=>u.getBDInstance().removeOverlay(t))}removeViews(){window.$view&&window.$view.webglLayer.canvas.remove()}}const j="MapPoint";class je{constructor(){this.handlerEvent=null}static getOEConstructor(){return window.Cesium||window.Cesium}static getOEInstance(){return window.$viewer}drawCesium(e){this.handlerEvent||this.initClick();const t={};return t.polygon=e.polygonType===2?this.renderOEBoundary(e.polygon,e.polygonColor,e.polygonHeight):this._renderOEPolygon(e),t.icon=this.__renderOEIconByCanvas(e),t.label=this.__renderOELabelByCanvas(e),{target:t,remove:()=>{var o,n,i;(o=t.polygon)==null||o.remove(),(n=t.icon)==null||n.remove(),(i=t.label)==null||i.remove()}}}renderOEBoundary(e,t,o=1){const n=[...e,e[1]].map(s=>[s[0],s[1],o]).flat(2),i=Cesium.getOEInstance().entities.add({typeName:j,wall:{show:!0,positions:Cesium.getOEConstructor().Cartesian3.fromDegreesArrayHeights(n),material:Cesium.getOEConstructor().Color.fromCssColorString(t).withAlpha(.2),outlineColor:Cesium.getOEConstructor().Color.fromCssColorString(t),outline:!0}});return{target:[i],remove:()=>{Cesium.getOEInstance()&&Cesium.getOEInstance().entities.remove(i)}}}_renderOEPolygon(e){if(!e.polygon||e.hidPolyon)return;const t=e.polygon.flat(2),o=Cesium.getOEInstance().entities.add({typeName:j,polyline:{positions:Cesium.getOEConstructor().Cartesian3.fromDegreesArray(t),width:1,clampToGround:!0,material:Cesium.getOEConstructor().Color.fromCssColorString(e.borderColor)}}),n=Cesium.getOEInstance().entities.add({typeName:j,polygon:{hierarchy:Cesium.getOEConstructor().Cartesian3.fromDegreesArray(t),material:Cesium.getOEConstructor().Color.fromCssColorString(e.borderColor).withAlpha(e.borderOpacity||.2),extrudedHeight:e.borderHeight||1,closeTop:!0,closeBottom:!1}});return{target:[o,n],remove:()=>{Cesium.getOEInstance()&&(Cesium.getOEInstance().entities.remove(o),Cesium.getOEInstance().entities.remove(n))}}}__renderOEIconByCanvas(e){var o,n,i;let t={id:e.id+"_icon",name:e.label,position:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude,0),show:!e.hidIcon,billboard:{image:e.icon,width:((o=e==null?void 0:e.iconStyle)==null?void 0:o.width)||25,height:((n=e==null?void 0:e.iconStyle)==null?void 0:n.height)||37,pixelOffset:new Cesium.Cartesian2(0,-((((i=e==null?void 0:e.iconStyle)==null?void 0:i.height)||37)/2))},event:()=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(null,e),e.emit&&Vue&&Vue.prototype.$bus.$emit(e.emit,e)},removeCustom:e.removeCustom,data:e};return t=Cesium.getOEInstance().entities.add(t),{target:t,remove:()=>{Cesium.getOEInstance()&&Cesium.getOEInstance().entities.remove(t)}}}__renderOELabelByCanvas(e){var o,n,i,s,l;let t={id:e.id+"_label",name:e.label,position:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude,0),show:!e.hidLabel,label:{fillColor:Cesium.Color.fromCssColorString(((o=e==null?void 0:e.labelStyle)==null?void 0:o.color)||"white"),showBackground:!0,backgroundColor:Cesium.Color.fromCssColorString(((n=e==null?void 0:e.labelStyle)==null?void 0:n.background)||"rgba(11,30,43,0.6)"),text:e.label,font:((i=e==null?void 0:e.labelStyle)==null?void 0:i.font)||"12px sans-serif",backgroundPadding:new Cesium.Cartesian2(...((s=e==null?void 0:e.labelStyle)==null?void 0:s.padding)||[10,10]),pixelOffset:new Cesium.Cartesian2(0,-((((l=e==null?void 0:e.iconStyle)==null?void 0:l.height)||25)*1.5+10)),horizontalOrigin:Cesium.HorizontalOrigin.CENTER},event:()=>{Object.prototype.toString.call(e.event).includes("Function")&&e.event(null,e),e.emit&&Vue&&Vue.prototype.$bus.$emit(e.emit,e)},removeCustom:e.removeCustom,data:e};return t=Cesium.getOEInstance().entities.add(t),{target:t,remove:()=>{Cesium.getOEInstance()&&Cesium.getOEInstance().entities.remove(t)}}}initClick(){this.handlerEvent=new Cesium.ScreenSpaceEventHandler(Cesium.getOEInstance().scene.canvas),this.handlerEvent.setInputAction(e=>{var t=Cesium.getOEInstance().scene.pick(e.position);t&&t.id&&t.id.event&&t.id.event(null,t.id.data)},Cesium.ScreenSpaceEventType.LEFT_CLICK)}renderOECustom(e,t){var h;if(!e.custom&&!t)return;const o=document.querySelector(".cesium-viewer-cesiumWidgetContainer"),n=t?t():e.custom();n.style.position="absolute",n.style.top=0,n.style.left=0,n.setAttribute("data-one-map-sign-custom",!0),o.appendChild(n);const i=new(Cesium.getOEConstructor()).Cartesian2,s=Cesium.getOEInstance().scene,l=(((h=e==null?void 0:e.iconStyle)==null?void 0:h.height)||25)*1.5,c=(e==null?void 0:e.point3D)||[0,0];let a=null;!c[0]&&!c[1]&&(c[0]=e.longitude,c[1]=e.latitude);const g=()=>{Cesium.getOEConstructor().SceneTransforms.wgs84ToWindowCoordinates(s,Cesium.getOEConstructor().Cartesian3.fromDegrees(...c),i);const p=Math.round(i.y-n.offsetHeight-l)+"px",C=`translate(${Math.round(i.x-n.offsetWidth/2)+"px"},${p})`;C!==a&&(a=C,n.style.transform=C)};return g.dataCesiumSignCustom=!0,Cesium.getOEInstance().scene.postRender.addEventListener(g),{target:n,remove:()=>{var p;Cesium.getOEInstance()&&((p=n.parentNode)==null||p.removeChild(n),Cesium.getOEInstance().scene.postRender.removeEventListener(g))}}}deleteAllCesium(){if(!Cesium.getOEInstance())return;const e=document.querySelector(".cesium-viewer-cesiumWidgetContainer"),t=e==null?void 0:e.querySelectorAll("[data-one-map-sign-custom=true]");t==null||t.forEach(i=>{var s;(s=i.parentNode)==null||s.removeChild(i)}),Cesium.getOEInstance().scene.postRender._listeners.forEach(i=>{i.dataCesiumSignCustom&&Cesium.getOEInstance().scene.postRender.removeEventListener(i)}),[...Cesium.getOEInstance().entities.values].forEach(i=>{i._typeName===j&&Cesium.getOEInstance().entities.remove(i)})}_pauseLabelDialog(e){const t=e.querySelector('[data-dialog-content="true"]');t&&(t.addEventListener("wheel",o=>{o.stopPropagation()}),t.addEventListener("pointerdown",o=>{o.stopPropagation()}))}_proxyWheel(e){const t=e.parentNode.querySelector(".cesium-widget canvas"),o=["bubbles","cancelable","screenX","screenY","clientX","clientY","button","buttons"];let n=0;const i=s=>{const l={};return o.forEach(c=>l[c]=s[c]),l.pointerId=s.pointerId,l};e.addEventListener("wheel",function(s){const l=new WheelEvent("wheel",{deltaY:s.deltaY});t.dispatchEvent(l)}),e.addEventListener("pointerdown",function(s){n=Date.now();try{s==null||s.click()}catch{}const l=new PointerEvent("pointerdown",i(s));t.dispatchEvent(l)}),t.addEventListener("pointerup",function(s){if(n!==0){const l=i(s),c=Date.now()-n;c>20&&c<800&&e.dispatchEvent(new MouseEvent("click",{...l,pointerId:void 0})),n=0}})}}class K extends De(u,je){constructor(e){super(),this.defaultBackgroundColor=(e==null?void 0:e.defaultBackgroundColor)||"#0090FF",this.defaultBorderColor=(e==null?void 0:e.defaultBorderColor)||"#0090FF",this.getColor=e==null?void 0:e.getColor,this.getIcon=e==null?void 0:e.getIcon,this.getColor=e==null?void 0:e.getColor,e!=null&&e.getCesiumInstance&&K.setOEInstance(e==null?void 0:e.getCesiumInstance),e!=null&&e.getBDMapGlInstance&&K.setBDInstance(e==null?void 0:e.getBDMapGlInstance)}static setOEInstance(e){Cesium.getOEInstance=e}static setBDInstance(e){Cesium.getBDInstance=e}create(e){return this.draw(e)}draw(e){return Cesium.getOEInstance()?this.drawCesiumList(e):(this.removeViews(),this.drawBDMapList(e))}renderCustom(e,t){return Cesium.getOEInstance()?this.renderOECustom(e,t):this.renderBDCustom(e,t)}deleteAll(){Cesium.getOEInstance()?this.deleteAllCesium():this.deleteAllBDMap()}renderBoundary(e,t,o){return Cesium.getOEInstance()?this.renderOEBoundary(e,t,o):this.renderBDBoundary(e,t,o)}drawCesiumList(e){const t=[],o={};return e.forEach(n=>{const i=this.handleData(n);if(!i)return;const s=this.drawCesium(i);t.push(s)}),this.getOEInstance(t,o)}drawBDMapList(e){const t=[],o={};return e.forEach(n=>{const i=this.handleData(n);if(!i)return;const s=this.drawBDMap(i);t.push(s)}),this.getOEInstance(t,o)}getOEInstance(e,t){const o=()=>{Object.keys(t).forEach(n=>{t[n].forEach(i=>i==null?void 0:i.remove()),t[n]=[]})};return{target:e,remove:()=>{e.remove&&e.remove(),e.forEach&&e.forEach(n=>n.remove()),o()},renderCustom:(n,i,s=!0,l=!0)=>{if(s&&t[n.id]&&t[n.id].length>0)return;l&&o();const c=this.renderCustom(n,i);return t[n.id]||(t[n.id]=[]),t[n.id].push(c),c},removeCustom:n=>{t[n.id]&&(t[n.id].forEach(i=>{i==null||i.remove()}),t[n.id]=[])},removeCustomAll:()=>{o()},includeCustom:n=>t[n.id]&&t[n.id].length>0}}handleData(e){return this.handleInfo(e),e}handleInfo(e){return!e.icon&&this.getIcon&&(e.icon=this.getIcon(e.iconType)),!e.backgroundColor&&this.getColor&&(e.backgroundColor=this.getColor(e.backgroundColorType)),!e.borderColor&&this.getColor&&(e.borderColor=this.getColor(e.borderColorType)),e.backgroundColor||(e.backgroundColor=this.defaultBackgroundColor),e.borderColor||(e.borderColor=this.defaultBorderColor),e}getRender(e,t){return function(){const o="RENDER_MAP_POPOVER_"+Date.now(),n=document.createElement("div"),i=document.createElement("div"),s={observer:null,vm:null};n.setAttribute("id",o),n.appendChild(i),t.mixins||(t.mixins=[]),t.mixins.push({methods:{getPoint(){return this.$parent.RENDER_DATA}}}),s.vm=new Vue({el:i,data:{RENDER_DATA:e},render:a=>a(t)});function l(){document.getElementById(o)||(s.vm.$destroy(),s.observer.disconnect(),s.vm=null,s.observer=null)}function c(){setTimeout(()=>{const a=n.parentNode;l(),a&&MutationObserver&&(s.observer=new MutationObserver(()=>l()),s.observer.observe(document.body,{childList:!0,subtree:!0}))},500)}return c(),n}}}const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAAAXNSR0IArs4c6QAAATRJREFUOE/tkT9LQlEYxn/vLevSVp9AwtoEh6hFSPQi3DkcGxxsimhxEyKCRqM+QR+gsUXzD0RETs4GiYNTcKEWCdJz4lyverW9qTMceF9+53nf8zxCcHQqtUMkcoxSCb8l8sxodC3NZscvzaUzmSNErlBqDREDjZ9r/QEcSr1+Lzqd3sWyHolGV3FdaDSg44tMzifDYUK049wBB5TLEI9Dvw/5fBg0ymUDesAGxSJks9BqQak0D0LbgN/AMrYNsRh0uzAYLIJvBnwFtoLlZx8Jo1o/GPAC+DVrTlKpguhkch3bfgG2F+cF9RO9njPxcRO4RWQPpVZ8wLK+gCqWVZBq9T1wFnQut4Tn7eO6pz5YqVxSq7UE9DSZ+b312ThBOQ/3p4rTzPU/ODPob+w5CZK5CSfzA4MyhfTaismyAAAAAElFTkSuQmCC",He={id:"cesiumContainer",class:"cesium-box"},Re={__name:"index",setup(r){let e="",t=null,o=null;return Ie(()=>{e=setInterval(()=>{window.Cesium&&(clearInterval(e),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",window.$viewer=new Cesium.Viewer("cesiumContainer"),Ee(window.$viewer,{longitude:114.44798458764086,latitude:22.782112133077288},!0),t=new K({getCesiumInstance(){return window.$viewer}}),o=t.create(Je.map((n,i)=>({id:i,...n,icon:qe,iconStyle:{width:10,height:22}}))))},1e3),Se(()=>{window.$viewer=null,o.remove()})}),(n,i)=>(Q(),Ce("div",He))}},Ye=ge(Re,[["__scopeId","data-v-f6cec507"]]),Ue={style:{"margin-bottom":"10px"}},Ke={style:{"margin-bottom":"10px"}},Qe={__name:"flyToTarget",setup(r){let e=x(""),t=x(""),o=x(""),n=x([]);function i(){fetch(`https://api.tianditu.gov.cn/geocoder?ds={"keyWord":"${o.value}"}&tk=cd084de7e251a6d429ceb5cae01c4cd4`).then(function(l){return l.json()}).then(function(l){n.value=[{...l.location,longitude:l.location.lon,latitude:l.location.lat}]}).catch(function(l){})}function s(l){const{longitude:c,latitude:a}=l;c&&a&&Ee(window.$viewer,{longitude:c,latitude:a},!0)}return(l,c)=>{const a=A("el-input"),g=A("el-button"),h=A("el-table-column"),p=A("el-table"),S=A("el-card");return Q(),de(S,{class:"box-card"},{default:M(()=>[f("div",Ue,[y(" 经度："),b(a,{modelValue:k(e),"onUpdate:modelValue":c[0]||(c[0]=C=>ee(e)?e.value=C:e=C),style:{width:"200px"}},null,8,["modelValue"])]),f("div",Ke,[y(" 纬度："),b(a,{modelValue:k(t),"onUpdate:modelValue":c[1]||(c[1]=C=>ee(t)?t.value=C:t=C),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),b(g,{type:"primary",onClick:c[2]||(c[2]=C=>s({longitude:k(e),latitude:k(t)}))},{default:M(()=>[y("飞行")]),_:1})]),y(" 搜索地名："),b(a,{modelValue:k(o),"onUpdate:modelValue":c[3]||(c[3]=C=>ee(o)?o.value=C:o=C),onChange:i,style:{width:"200px"}},null,8,["modelValue"]),b(p,{data:k(n),height:"250",style:{width:"100%","margin-top":"10px"}},{default:M(()=>[b(h,{prop:"keyWord",label:"地名"}),b(h,{prop:"longitude",label:"经度"}),b(h,{prop:"latitude",label:"维度"}),b(h,{label:"操作",width:"60"},{default:M(C=>[b(g,{link:"",type:"primary",size:"small",onClick:$=>s(C.row)},{default:M(()=>[y(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}},Xe=ge(Qe,[["__scopeId","data-v-2381f44a"]]),Ze={style:{margin:"0 0 10px 5px",display:"flex","align-items":"center"}},et={style:{"margin-left":"10px"}},tt={style:{color:"#409eff"}},nt={style:{color:"#e6a23c"}},ot={style:{color:"#67c23a"}},rt={__name:"getPoint",setup(r){const e=x({longitude:null,latitude:null}),t=x({longitude:null,latitude:null}),o=x({longitude:null,latitude:null,altitude:null});function n(){Ve(s=>{o.value=s.WGS84,t.value=s.GCJ02,e.value=s.BD09})}function i(){ve()}return(s,l)=>{const c=A("el-button"),a=A("el-card");return Q(),de(a,{class:"box-card"},{default:M(()=>[f("div",Ze,[b(c,{type:"primary",onClick:n},{default:M(()=>[y("获取坐标")]),_:1}),b(c,{type:"primary",onClick:i},{default:M(()=>[y("取消获取")]),_:1}),f("div",et,[f("div",tt,[y(" 84坐标： "),f("span",null,L(o.value.longitude),1),y("  "),f("span",null,L(o.value.latitude),1)]),f("div",nt,[y(" 百度坐标： "),f("span",null,L(e.value.longitude),1),y("  "),f("span",null,L(e.value.latitude),1)]),f("div",ot,[y(" 火星坐标： "),f("span",null,L(t.value.longitude),1),y("  "),f("span",null,L(t.value.latitude),1)])])])]),_:1})}}},it=f("h1",{id:"地图",tabindex:"-1"},[y("地图 "),f("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),st=f("h2",{id:"cesium地图",tabindex:"-1"},[y("Cesium地图 "),f("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),lt=f("h2",{id:"获取坐标",tabindex:"-1"},[y("获取坐标 "),f("a",{class:"header-anchor",href:"#获取坐标","aria-label":'Permalink to "获取坐标"'},"​")],-1),ct=f("h2",{id:"飞行方法",tabindex:"-1"},[y("飞行方法 "),f("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),gt=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md","filePath":"component_library/地图.md"}'),ut={name:"component_library/地图.md"},Ct=Object.assign(ut,{setup(r){return(e,t)=>(Q(),Ce("div",null,[it,st,b(Ye),lt,b(rt),ct,b(Xe)]))}});export{gt as __pageData,Ct as default};
