import{_ as O,p as S,y as J,o as C,c as T,h as y,a8 as R,l as U,A as Y,B as b,G as h,z as c,a as u,E as n,b as r,a9 as x}from"./chunks/framework.753bfd52.js";const B={id:"cesium-box",class:"cesium-box"},E={__name:"index",setup(w){let s="";return S(()=>{s=setInterval(()=>{window.Cesium&&(clearInterval(s),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",window.$viewer=new Cesium.Viewer("cesium-box"))},1e3),J(()=>{window.$viewer=null})}),(p,g)=>(C(),T("div",B))}},P=O(E,[["__scopeId","data-v-7f6b82d1"]]);const A={style:{"margin-bottom":"10px"}},L={style:{"margin-bottom":"10px"}},$={__name:"flyToTarget",props:{$viewer:{type:Object,required:!0}},setup(w){let s=y(""),p=y(""),g=y(""),o=R({total:0,list:[],pageSize:10,pageNum:1}),z=U(()=>o.list.slice(o.pageSize*(o.pageNum-1),o.pageSize*o.pageNum));function M(a,e,l=!1){const m=Object.prototype.toString.call(e);let{longitude:i,latitude:d,altitude:_,heading:f,pitch:t,roll:v}={longitude:120.5,latitude:28.8856,altitude:2080359375e-2,heading:360,pitch:-89.99,roll:0};if(e){if(m!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");i=Number(e.longitude),d=Number(e.latitude),_=Number(e.altitude||3e3)}if(e&&!l){const N=j(a),V=Cesium.Cartesian3.fromDegrees(i,d);f=N.heading,t=N.pitch;let D=_||3e3;a.camera.lookAt(V,new Cesium.HeadingPitchRange(f,t,D)),a.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,d,_),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-89.99),roll:0}})}function j(a){const e=a.camera,l=OneMap.Cartographic.fromCartesian(e.position),m=OneMap.Math.toDegrees(l.longitude),i=OneMap.Math.toDegrees(l.latitude),d=l.height;let _=OneMap.Cartographic.fromDegrees(m,i,d),t=a.scene.globe.ellipsoid.cartographicToCartesian(_);return{longitude:m,latitude:i,height:d,x:t.x,y:t.y,z:t.z,heading:e.heading,pitch:e.pitch,roll:e.roll}}function I(){fetch(`https://api.geonames.org/searchJSON?name=${g.value}&username=xwenda`).then(function(a){return a.json()}).then(function(a){o.total=a.totalResultsCount,o.list=a.geonames.map(e=>(e.latitude=e.lat,e.longitude=e.lng,e)),o.pageNum=1}).catch(function(a){})}function k(a){const{longitude:e,latitude:l}=a;e&&l&&M(window.$viewer,{longitude:e,latitude:l},!0)}return(a,e)=>{const l=h("el-input"),m=h("el-button"),i=h("el-table-column"),d=h("el-table"),_=h("el-pagination"),f=h("el-card");return C(),Y(f,{class:"box-card"},{default:b(()=>[c("div",A,[u(" 经度："),n(l,{modelValue:r(s),"onUpdate:modelValue":e[0]||(e[0]=t=>x(s)?s.value=t:s=t),style:{width:"200px"}},null,8,["modelValue"])]),c("div",L,[u(" 纬度："),n(l,{modelValue:r(p),"onUpdate:modelValue":e[1]||(e[1]=t=>x(p)?p.value=t:p=t),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),n(m,{type:"primary",onClick:e[2]||(e[2]=t=>k({longitude:r(s),latitude:r(p)}))},{default:b(()=>[u("飞行")]),_:1})]),u(" 搜索地名："),n(l,{modelValue:r(g),"onUpdate:modelValue":e[3]||(e[3]=t=>x(g)?g.value=t:g=t),onChange:I,style:{width:"200px"}},null,8,["modelValue"]),n(d,{data:r(z),height:"250",style:{width:"100%","margin-top":"10px"}},{default:b(()=>[n(i,{fixed:"",prop:"name",label:"名字"}),n(i,{prop:"lng",label:"经度"}),n(i,{prop:"lat",label:"维度"}),n(i,{label:"操作",width:"60"},{default:b(t=>[n(m,{link:"",type:"primary",size:"small",onClick:v=>k(t.row)},{default:b(()=>[u(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n(_,{"current-page":r(o).pageNum,"onUpdate:currentPage":e[4]||(e[4]=t=>r(o).pageNum=t),"page-size":r(o).pageSize,"onUpdate:pageSize":e[5]||(e[5]=t=>r(o).pageSize=t),"page-sizes":[10,20,30,40],disabled:!1,background:!1,layout:"total, prev, pager, next",total:r(o).total,"pager-count":11},null,8,["current-page","page-size","total"])]),_:1})}}},q=O($,[["__scopeId","data-v-99d42f49"]]),G=c("h1",{id:"地图",tabindex:"-1"},[u("地图 "),c("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),F=c("h2",{id:"cesium地图",tabindex:"-1"},[u("Cesium地图 "),c("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),W=c("h2",{id:"飞行方法",tabindex:"-1"},[u("飞行方法 "),c("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),K=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md"}'),Z={name:"component_library/地图.md"},Q=Object.assign(Z,{setup(w){return(s,p)=>(C(),T("div",null,[G,F,n(P),W,n(q)]))}});export{K as __pageData,Q as default};
