import{_ as O,p as S,y as E,o as C,c as T,h as y,a8 as J,l as R,A as P,B as b,G as f,z as p,a as u,E as i,b as r,a9 as x}from"./chunks/framework.753bfd52.js";import{E as U}from"./chunks/index.c6e4ff5b.js";import"./chunks/index.63d14f2d.js";const Y={id:"cesium-box",class:"cesium-box"},B={__name:"index",setup(w){let d="";return S(()=>{d=setInterval(()=>{window.Cesium&&(clearInterval(d),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMzcwODc2Mi1jYTBiLTRlMjItYmE5Yy0yY2YxZjc4NjNjZmYiLCJpZCI6MTczODAwLCJpYXQiOjE2OTgyMjUyODF9.sIv9WqaDyqMKtKOiprN9HoVWtVkSGko_FDREBLMD4bQ",window.$viewer=new Cesium.Viewer("cesium-box"))},1e3),E(()=>{window.$viewer=null})}),(m,g)=>(C(),T("div",Y))}},A=O(B,[["__scopeId","data-v-7f6b82d1"]]);const L={style:{"margin-bottom":"10px"}},q={style:{"margin-bottom":"10px"}},G={__name:"flyToTarget",props:{$viewer:{type:Object,required:!0}},setup(w){let d=y(""),m=y(""),g=y(""),l=J({total:0,list:[],pageSize:10,pageNum:1}),M=R(()=>l.list.slice(l.pageSize*(l.pageNum-1),l.pageSize*l.pageNum));function z(n,e,o=!1){const s=Object.prototype.toString.call(e);let{longitude:a,latitude:c,altitude:_,heading:h,pitch:t,roll:v}={longitude:120.5,latitude:28.8856,altitude:2080359375e-2,heading:360,pitch:-89.99,roll:0};if(e){if(s!=="[object Object]")throw Error("格式为： { longitude, latitude, altitude }");a=Number(e.longitude),c=Number(e.latitude),_=Number(e.altitude||3e3)}if(e&&!o){const N=I(n),j=Cesium.Cartesian3.fromDegrees(a,c);h=N.heading,t=N.pitch;let D=_||3e3;n.camera.lookAt(j,new Cesium.HeadingPitchRange(h,t,D)),n.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}else n.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(a,c,_),orientation:{heading:Cesium.Math.toRadians(360),pitch:Cesium.Math.toRadians(-89.99),roll:0}})}function I(n){const e=n.camera,o=OneMap.Cartographic.fromCartesian(e.position),s=OneMap.Math.toDegrees(o.longitude),a=OneMap.Math.toDegrees(o.latitude),c=o.height;let _=OneMap.Cartographic.fromDegrees(s,a,c),t=n.scene.globe.ellipsoid.cartographicToCartesian(_);return{longitude:s,latitude:a,height:c,x:t.x,y:t.y,z:t.z,heading:e.heading,pitch:e.pitch,roll:e.roll}}function V(){try{const{fetch:n,sendResult:e}=window.myAPI;n(g.value),e(o=>{const s=JSON.parse(o);l.total=s.totalResultsCount,l.list=s.geonames.map(a=>(a.latitude=a.lat,a.longitude=a.lng,a)),l.pageNum=1})}catch{U.error({message:"没有搞服务器，网页端暂时不支持查询，app和桌面端才能查"})}}function k(n){const{longitude:e,latitude:o}=n;e&&o&&z(window.$viewer,{longitude:e,latitude:o},!0)}return(n,e)=>{const o=f("el-input"),s=f("el-button"),a=f("el-table-column"),c=f("el-table"),_=f("el-pagination"),h=f("el-card");return C(),P(h,{class:"box-card"},{default:b(()=>[p("div",L,[u(" 经度："),i(o,{modelValue:r(d),"onUpdate:modelValue":e[0]||(e[0]=t=>x(d)?d.value=t:d=t),style:{width:"200px"}},null,8,["modelValue"])]),p("div",q,[u(" 纬度："),i(o,{modelValue:r(m),"onUpdate:modelValue":e[1]||(e[1]=t=>x(m)?m.value=t:m=t),style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),i(s,{type:"primary",onClick:e[2]||(e[2]=t=>k({longitude:r(d),latitude:r(m)}))},{default:b(()=>[u("飞行")]),_:1})]),u(" 搜索地名："),i(o,{modelValue:r(g),"onUpdate:modelValue":e[3]||(e[3]=t=>x(g)?g.value=t:g=t),onChange:V,style:{width:"200px"}},null,8,["modelValue"]),i(c,{data:r(M),height:"250",style:{width:"100%","margin-top":"10px"}},{default:b(()=>[i(a,{fixed:"",prop:"name",label:"名字"}),i(a,{prop:"lng",label:"经度"}),i(a,{prop:"lat",label:"维度"}),i(a,{label:"操作",width:"60"},{default:b(t=>[i(s,{link:"",type:"primary",size:"small",onClick:v=>k(t.row)},{default:b(()=>[u(" 飞行 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(_,{"current-page":r(l).pageNum,"onUpdate:currentPage":e[4]||(e[4]=t=>r(l).pageNum=t),"page-size":r(l).pageSize,"onUpdate:pageSize":e[5]||(e[5]=t=>r(l).pageSize=t),"page-sizes":[10,20,30,40],disabled:!1,background:!1,layout:"total, prev, pager, next",total:r(l).total,"pager-count":11},null,8,["current-page","page-size","total"])]),_:1})}}},$=O(G,[["__scopeId","data-v-cf5ba775"]]),F=p("h1",{id:"地图",tabindex:"-1"},[u("地图 "),p("a",{class:"header-anchor",href:"#地图","aria-label":'Permalink to "地图"'},"​")],-1),W=p("h2",{id:"cesium地图",tabindex:"-1"},[u("Cesium地图 "),p("a",{class:"header-anchor",href:"#cesium地图","aria-label":'Permalink to "Cesium地图"'},"​")],-1),Z=p("h2",{id:"飞行方法",tabindex:"-1"},[u("飞行方法 "),p("a",{class:"header-anchor",href:"#飞行方法","aria-label":'Permalink to "飞行方法"'},"​")],-1),ee=JSON.parse('{"title":"地图","description":"","frontmatter":{},"headers":[],"relativePath":"component_library/地图.md"}'),H={name:"component_library/地图.md"},te=Object.assign(H,{setup(w){return(d,m)=>(C(),T("div",null,[F,W,i(A),Z,i($)]))}});export{ee as __pageData,te as default};
